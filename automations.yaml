- id: vuilbak_001
  alias: Vuilbakken - Bert Thuis
  description: Notificatie voor vuilbakken als Bert thuis komt
  trigger:
  - entity_id: person.bert
    platform: state
    to: 'home'
  condition:
  - condition: state
    entity_id: input_select.woning_status
    state: Thuis,Thuis (Werk),Thuis (Verlof)
  - condition: template
    value_template: '{{ ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true)
      == states(''sensor.ophaalkalender_restafval'')) or ((as_timestamp(now())+ (86400))
      | timestamp_custom(''%Y-%m-%d'',true) == states(''sensor.ophaalkalender_papier''))
      or ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true) ==
      states(''sensor.ophaalkalender_pmd'')) }}'
  action:
  - continue_on_timeout: false
    timeout: 00:05:00
    wait_template: '{{ is_state(''device_tracker.router_iphone_bert'', ''home'') }}'
  - entity_id: script.notify_waste_ios_bert
    service: script.turn_on
  initial_state: false
  mode: single
- id: vuilbak_002
  alias: Vuilbakken - Reminder voor avond
  trigger:
  - platform: time
    at: '20:30:00'
  condition:
  - condition: template
    value_template: '{{ states(''input_select.woning_status'') in [''Juist Thuis'',
      ''Thuis'', ''Thuis (Werk)'', ''Thuis (Verlof)''] }}'
  - condition: template
    value_template: '{{ ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true)
      == states(''sensor.ophaalkalender_restafval'')) or ((as_timestamp(now())+ (86400))
      | timestamp_custom(''%Y-%m-%d'',true) == states(''sensor.ophaalkalender_papier''))
      or ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true) ==
      states(''sensor.ophaalkalender_pmd'')) }}'
  action:
  - service: script.turn_on
    entity_id: script.notify_waste
- id: vuilbak_003
  alias: Vuilbakken - Status Woning Changes
  initial_state: false
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis (Werk)
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis (Verlof)
  condition:
  - condition: template
    value_template: '{{ ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true)
      == states(''sensor.ophaalkalender_restafval'')) or ((as_timestamp(now())+ (86400))
      | timestamp_custom(''%Y-%m-%d'',true) == states(''sensor.ophaalkalender_papier''))
      or ((as_timestamp(now())+ (86400)) | timestamp_custom(''%Y-%m-%d'',true) ==
      states(''sensor.ophaalkalender_pmd'')) or ((as_timestamp(now())+ (86400)) |
      timestamp_custom(''%Y-%m-%d'',true) == states(''sensor.ophaalkalender_glas''))
      }}'
  action:
  - service: script.turn_on
    entity_id: script.notify_waste
- id: music_downstairs_001
  alias: Muziek - Downstairs - Play 2
  trigger:
  - platform: state
    to: 'playing'
    entity_id:
      - media_player.alexa_livingroom_1
      - media_player.alexa_kitchen_1
  condition:
  - condition: state
    state: 'playing'
    entity_id: 
      - media_player.alexa_kitchen_1
      - media_player.alexa_livingroom_1
  - condition: not
    conditions:
    - condition: state
      state: 'playing'
      entity_id:
        - media_player.alexa_downstairs
    - condition: state
      state: 'playing'
      entity_id:
        - media_player.alexa_everywhere
  action:
  - service: script.turn_on
    entity_id:
    - script.beneden_music_play
- id: music_downstairs_002
  alias: Muziek - Downstairs - Play 1
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_sensor_woonkamer_motion
    from: 'off'
    to: 'on'
  condition:
  - condition: time
    after: 05:50:00
    before: '19:20:00'
  - condition: state
    state: 'on'
    entity_id:
    - input_boolean.music_follow
  - condition: state
    state: 'off'
    entity_id:
    - input_boolean.media_kitchen
    - input_boolean.media_livingroom
  - condition: not
    conditions:
    - condition: state
      state: 'playing'
      entity_id:
      - media_player.alexa_livingroom_1
    - condition: state
      state: 'playing'
      entity_id:
      - media_player.alexa_downstairs
    - condition: state
      state: 'playing'
      entity_id:
      - media_player.alexa_everywhere
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Juist Thuis
    - Juist Wakker
    - Thuis
    - Thuis (Werk)
    - Thuis (Verlof)
  - condition: state
    entity_id: input_select.harmony_hub
    state:
    - Powered Off
    - Alexa
  action:
  - delay: 00:02:00
  - condition: state
    entity_id: input_select.harmony_hub
    state:
    - Powered Off
    - Alexa
  - service: script.turn_on
    entity_id:
    - script.beneden_music_play
- id: music_livingroom_001
  alias: Muziek - Woonkamer - Play
  trigger:
  - platform: state
    entity_id: input_select.harmony_hub
  condition:
  - condition: or
    conditions:
      - condition: and
        conditions:
          - condition: state
            state: 'playing'
            entity_id:
              - media_player.alexa_livingroom_1
          - condition: not
            conditions:
            - condition: state
              state: 'Alexa'
              entity_id:
                - input_select.harmony_hub
      - condition: and
        conditions:
          - condition: not
            conditions:
            - condition: state
              state: 'playing'
              entity_id:
                - media_player.alexa_livingroom_1
            - condition: state
              state: 'playing'
              entity_id:
                - media_player.alexa_downstairs
            - condition: state
              state: 'playing'
              entity_id:
                - media_player.alexa_everywhere
          - condition: state
            state: 'Alexa'
            entity_id:
              - input_select.harmony_hub
  action:
  - choose:
    - conditions:
      - condition: state
        state: 'Alexa'
        entity_id:
          - input_select.harmony_hub
      - condition: not
        conditions:
        - condition: state
          state: 'playing'
          entity_id:
            - media_player.alexa_livingroom_1
        - condition: state
          state: 'playing'
          entity_id:
            - media_player.alexa_downstairs
        - condition: state
          state: 'playing'
          entity_id:
            - media_player.alexa_everywhere
      sequence:
      - service: script.turn_on
        entity_id: script.woonkamer_music_play
    - conditions:
      - condition: state
        state: 'playing'
        entity_id:
          - media_player.alexa_livingroom_1
      - condition: not
        conditions:
        - condition: state
          state: 'Alexa'
          entity_id:
            - input_select.harmony_hub
      sequence:
      - service: script.turn_on
        entity_id: script.woonkamer_music_stop
    default:
    - service: script.turn_on
      entity_id: script.empty
- id: music_livingroom_002
  alias: Muziek - Woonkamer - Stop
  trigger:
  - entity_id: binary_sensor.hue_sensor_woonkamer_motion
    for:
      minutes: 30
    platform: state
    to: 'off'
  - platform: time
    at: '19:20:00'
  condition:
  - condition: state
    entity_id: media_player.alexa_livingroom_1
    state: 'playing'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.alexa_downstairs
        state: 'playing'
      sequence:
      - service: script.turn_on
        entity_id: script.beneden_music_stop
    - conditions:
      - condition: state
        entity_id: media_player.alexa_livingroom_1
        state: 'playing'
      sequence:
      - service: script.turn_on
        entity_id: script.woonkamer_music_stop
    default:
    - service: script.turn_on
      entity_id: script.empty
- id: music_bathroom_001
  alias: Muziek - Badkamer - Play
  trigger:
  - entity_id: binary_sensor.hue_sensor_dressing_motion
    platform: state
    from: 'off'
    to: 'on'
  condition:
  - condition: time
    after: 05:50:00
    before: '19:20:00'
  - condition: state
    entity_id: input_boolean.music_follow
    state: 'on'
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Juist Wakker
    - Thuis
    - Thuis (Werk)
    - Thuis (Verlof)
  - condition: not
    conditions:
    - condition: state
      state: 'playing'
      entity_id:
      - media_player.alexa_bathroom
    - condition: state
      state: 'playing'
      entity_id:
      - media_player.alexa_everywhere
  action:
  - service: script.turn_on
    entity_id:
    - script.badkamer_music_play
- id: music_bathroom_002
  alias: Muziek - Badkamer - Stop
  trigger:
  - entity_id: binary_sensor.hue_sensor_dressing_motion
    for:
      minutes: 30
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: media_player.alexa_bathroom
    state: 'playing'
  action:
  - service: script.turn_on
    entity_id:
    - script.badkamer_music_stop
- id: music_kitchen_001
  alias: Muziek - Keuken - Play
  trigger:
  - platform: state
    entity_id:
      - input_boolean.media_kitchen
    to: 'off'
    for:
      minutes: 3
  - platform: state
    to: 'Powered Off'
    entity_id: 
      - input_select.harmony_hub
  - platform: state
    to: 'Alexa'
    entity_id: 
      - input_select.harmony_hub
  - platform: state
    entity_id: 
      - binary_sensor.hue_sensor_keuken_motion
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: 
      - input_boolean.music_follow
    from: 'off'
    to: 'on'
  condition:
  - condition: time
    after: 05:50:00
    before: '19:20:00'
  - condition: state
    state: 'on'
    entity_id:
      - binary_sensor.hue_sensor_keuken_motion
      - input_boolean.music_follow
  - condition: state
    state: 'off'
    entity_id:
      - input_boolean.media_kitchen
      - input_boolean.media_livingroom
  - condition: not
    conditions:
    - condition: state
      state: 'playing'
      entity_id:
        - media_player.alexa_kitchen_1
    - condition: state
      state: 'playing'
      entity_id:
        - media_player.alexa_downstairs
    - condition: state
      state: 'playing'
      entity_id:
        - media_player.alexa_everywhere
  - condition: state
    entity_id: input_select.woning_status
    state:
      - Juist Thuis
      - Juist Wakker
      - Thuis
      - Thuis (Werk)
      - Thuis (Verlof)
  - condition: state
    entity_id: input_select.harmony_hub
    state:
      - Powered Off
      - Alexa
  action:
  - service: script.turn_on
    entity_id:
      - script.keuken_music_play
  - delay: 00:10:00
- id: music_kitchen_002
  alias: Muziek - Keuken - Stop
  trigger:
  - entity_id: binary_sensor.hue_sensor_keuken_motion
    for: 0:60:00
    platform: state
    to: 'off'
  - entity_id: input_select.harmony_hub
    platform: state
    to: 'Tv Decoder'
  - entity_id: input_select.harmony_hub
    platform: state
    to: 'Web OS'
  - entity_id:
    - input_boolean.media_kitchen
    - input_boolean.media_livingroom
    platform: state
    to: 'on'
  - entity_id:
    - media_player.apple_tv_keuken
    - media_player.apple_tv_woonkamer
    platform: state
    to: 'playing'
  condition:
  - condition: state
    entity_id: input_boolean.music_follow
    state: 'on'
  - condition: state
    entity_id: media_player.alexa_kitchen_1
    state: 'playing'
  action:
  - entity_id:
    - script.keuken_music_stop
    service: script.turn_on
  mode: single
- id: music_follow_001
  alias: Muziek - Follow - Disable
  trigger:
  - entity_id: media_player.alexa_kitchen_1
    platform: state
    from: 'playing'
    to: 'paused'
    for:
      seconds: 5
  condition:
  - condition: state
    entity_id: media_player.alexa_downstairs
    state:
      - paused
      - standby
      - unavailable
    for:
      minutes: 5
  - condition: state
    state: 'on'
    entity_id:
      - input_boolean.music_follow
  - condition: state
    state: 'off'
    entity_id:
      - input_boolean.media_kitchen
      - input_boolean.media_livingroom
  - condition: state
    entity_id: input_select.harmony_hub
    state:
      - Powered Off
  - condition: not
    conditions:
    - condition: state
      state:
        - Juist Weg
      entity_id:
        - input_select.woning_status
    - condition: state
      state:
        - Weg
      entity_id:
        - input_select.woning_status
    - condition: state
      state:
        - Slapen
      entity_id:
        - input_select.woning_status
  action:
  - service: script.turn_on
    entity_id:
      - script.music_follow_off
      - script.keuken_music_stop
- id: music_follow_002
  alias: Muziek - Follow - Enable
  trigger:
  - platform: state
    from: 'paused'
    to: 'playing'
    entity_id:
    - media_player.alexa_kitchen_1
    - media_player.alexa_downstairs
    - media_player.alexa_livingroom_1
  - platform: state
    entity_id: input_boolean.music_follow
    to: 'off'
    for:
      minutes: 4
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.alexa_kitchen_1
      state: 'playing'
    - condition: state
      entity_id: media_player.alexa_downstairs
      state: 'playing'
    - condition: state
      entity_id: media_player.alexa_livingroom_1
      state: 'playing'
  - condition: state
    entity_id: input_boolean.music_follow
    state: 'off'
    for:
      minutes: 3
  action:
  - service: script.turn_on
    entity_id:
    - script.music_follow_on
- id: music_follow_003
  alias: Muziek - Follow - Enable 2
  trigger:
  - platform: state
    entity_id:
    - input_boolean.music_follow
    to: 'off'
    for:
      minutes: 180
  action:
  - service: script.turn_on
    entity_id:
    - script.music_follow_on
- id: music_volume_001
  alias: Muziek - Volume - Woonkamer
  trigger:
  - platform: state
    to: 'Alexa'
    entity_id:
    - input_select.harmony_hub
  - platform: state
    to: 'playing'
    entity_id:
    - media_player.alexa_livingroom_1
    - media_player.alexa_downstairs
    - media_player.alexa_everywhere
  action:
  - service: script.turn_on
    entity_id:
    - script.woonkamer_music_volume
- id: music_volume_002
  alias: Muziek - Volume - Beiden Thuis
  trigger:
  - platform: state
    to: 'home'
    entity_id:
    - person.bert
    - person.caroline
  condition:
  - condition: state
    state: 'home'
    entity_id:
    - person.bert
    - person.caroline
  action:
  - service: script.turn_on
    entity_id:
    - script.keuken_music_volume
    - script.woonkamer_music_volume
    - script.badkamer_music_volume
- id: music_volume_003
  alias: Muziek - Volume - Keuken Ochtend
  trigger:
  - platform: time
    at: 07:59:00
  - platform: time
    at: 08:59:00
  condition:
  - condition: state
    state: 'playing'
    entity_id:
    - media_player.alexa_kitchen_1
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Thuis
    - Thuis (Werk)
    - Thuis (Verlof)
  action:
  - service: script.turn_on
    entity_id: script.keuken_music_volume
- id: music_volume_004
  alias: Muziek - Volume - Woonkamer Nieuws
  trigger:
  - platform: time
    at: '19:00:00'
  condition:
  - condition: state
    state: 'playing'
    entity_id:
    - media_player.alexa_livingroom_1
  - condition: state
    entity_id: input_select.harmony_hub
    state:
    - Alexa
  action:
  - service: script.turn_on
    entity_id: script.woonkamer_music_volume
- id: batterij_smappee_001
  alias: Batterij - Smappee - Bijna Leeg
  trigger:
  - below: 20
    entity_id: sensor.smappee_ons_huisje_water_sensor_battery
    platform: numeric_state
  - below: 10
    entity_id: sensor.smappee_ons_huisje_water_sensor_battery
    platform: numeric_state
  - below: 5
    entity_id: sensor.smappee_ons_huisje_water_sensor_battery
    platform: numeric_state
  action:
  - entity_id: script.notify_battery
    service: script.turn_on
  mode: single
- id: deurbel_voor_001
  alias: Deurbel - Als Deurbel Gaat
  trigger:
    platform: mqtt
    topic: doorbellsensorfront/status
  action:
  - service: script.turn_on
    entity_id:
    - script.notify_deurbel
    - script.all_remote_harmony_hub_pause
- id: verluchting_boven_001
  alias: Verluchting - Boolean Change based on Outside Temperature (Boven)
  trigger:
  - platform: template
    value_template: '{{ (state_attr(''weather.dark_sky'', ''temperature'')| float
      + 2) < state_attr(''climate.kamer_elmo'', ''current_temperature'') }}'
  - platform: template
    value_template: '{{ (state_attr(''weather.dark_sky'', ''temperature'')| float
      + 1) > state_attr(''climate.kamer_elmo'', ''current_temperature'') }}'
  condition:
  - condition: template
    value_template: '{{ is_state(''sensor.season'', ''summer'') }}'
  action:
    service_template: "{% if (state_attr('weather.dark_sky', 'temperature')| float\
      \ + 2) < state_attr('climate.kamer_elmo', 'current_temperature') -%}\n  input_boolean.turn_on\n\
      {%- elif (state_attr('weather.dark_sky', 'temperature')| float + 1) > state_attr('climate.kamer_elmo',\
      \ 'current_temperature') -%}\n  input_boolean.turn_off\n{%- endif %}\n"
    data:
      entity_id:
      - input_boolean.cooling_upstairs
- id: verluchting_beneden_002
  alias: Verluchting - Boolean Change based on Outside Temperature (Beneden)
  trigger:
  - platform: template
    value_template: '{{ (state_attr(''weather.dark_sky'', ''temperature'')| float
      + 2) < state_attr(''climate.keuken'', ''current_temperature'') }}'
  - platform: template
    value_template: '{{ (state_attr(''weather.dark_sky'', ''temperature'')| float
      + 1) > state_attr(''climate.keuken'', ''current_temperature'') }}'
  condition:
  - condition: template
    value_template: '{{ is_state(''sensor.season'', ''summer'') }}'
  action:
    service_template: "{% if (state_attr('weather.dark_sky', 'temperature')| float\
      \ + 2) < state_attr('climate.keuken', 'current_temperature') -%}\n  input_boolean.turn_on\n\
      {%- elif (state_attr('weather.dark_sky', 'temperature')| float + 1) > state_attr('climate.keuken',\
      \ 'current_temperature') -%}\n  input_boolean.turn_off\n{%- endif %}\n"
    data:
      entity_id:
      - input_boolean.cooling_downstairs
- id: verluchting_boven_002
  alias: Verluchting - Boolean Changes (Boven)
  trigger:
  - entity_id: input_boolean.cooling_upstairs
    platform: state
  action:
  - service: script.turn_on
    entity_id: script.notify_cooling_upstairs
- id: verluchting_beneden_002
  alias: Verluchting - Boolean Changes (Beneden)
  trigger:
  - entity_id: input_boolean.cooling_downstairs
    platform: state
  action:
  - service: script.turn_on
    entity_id: script.notify_cooling_downstairs
- id: media_plex_001
  alias: Plex - Webhook - to MQTT
  trigger:
    platform: webhook
    webhook_id: plex_bert
  action:
  - service: mqtt.publish
    data_template:
      topic: plex/update
      payload_template: '{{ (trigger.data | string)[154:][:-55] | replace ("\\\\","\\")
        | replace ("\\\''", "''") | replace ("\\x","?") }}'
- id: media_plex_002
  alias: Plex - Webhook - Update MQTT sensor
  trigger:
    platform: mqtt
    topic: plex/update
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.scrobble''}}'
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.rate''}}'
  action:
  - service: mqtt.publish
    data_template:
      topic: plex/update/sensor
      retain: true
      payload_template: "{  \"Player\":\"{{ trigger.payload_json.Player.title }}\"\
        ,\n   \"UUID\":\"{{ trigger.payload_json.Player.uuid }}\",\n   \"Event\":\"\
        {{ trigger.payload_json.event }}\",\n   \"Account\":\"{{ trigger.payload_json.Account.title\
        \ }}\",\n   \"Title\":\"{{ trigger.payload_json.Metadata.grandparentTitle\
        \ }}\",\n   \"Type\":\"{{ trigger.payload_json.Metadata.librarySectionType\
        \ }}\",\n   \"Image\":\"{{ trigger.payload_json.Metadata.thumb }}\" }\n"
- id: media_plex_003
  alias: Plex - Webhook - Toggle Living Room Boolean
  trigger:
    platform: mqtt
    topic: plex/update
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{trigger.payload_json.Account[''title''] == ''Bert Verlinden''}}'
    - condition: template
      value_template: '{{trigger.payload_json.Player.title != ''iPhone''}}'
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.scrobble''}}'
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.rate''}}'
    - condition: or
      conditions:
      - condition: template
        value_template: '{{trigger.payload_json.Player.title == ''Apple TV Woonkamer''}}'
      - condition: template
        value_template: '{{trigger.payload_json.Player.title == ''LG OLED55C9MLB''}}'
  action:
    service_template: "{% if ((trigger.payload_json.event == 'media.play') or (trigger.payload_json.event\
      \ == 'media.resume')) %}\n  input_boolean.turn_on\n{% elif ((trigger.payload_json.event\
      \ == 'media.pause') or (trigger.payload_json.event == 'media.stop')) %}\n  input_boolean.turn_off\n\
      {% endif %}\n"
    entity_id: input_boolean.media_livingroom
- id: media_plex_004
  alias: Plex - Webhook - Toggle Kitchen Boolean
  trigger:
    platform: mqtt
    topic: plex/update
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{trigger.payload_json.Account[''title''] == ''Bert Verlinden''}}'
    - condition: template
      value_template: '{{trigger.payload_json.Player.title != ''iPhone''}}'
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.scrobble''}}'
    - condition: template
      value_template: '{{trigger.payload_json.event != ''media.rate''}}'
    - condition: or
      conditions:
      - condition: template
        value_template: '{{trigger.payload_json.Player.title == ''Apple TV Keuken''}}'
      - condition: template
        value_template: '{{trigger.payload_json.Player.title == ''Chrome''}}'
  action:
    service_template: "{%- if ((trigger.payload_json.event == 'media.play') or (trigger.payload_json.event\
      \ == 'media.resume')) -%}\n  input_boolean.turn_on\n{%- elif ((trigger.payload_json.event\
      \ == 'media.pause') or (trigger.payload_json.event == 'media.stop')) -%}\n \
      \ input_boolean.turn_off\n{%- endif %}\n"
    entity_id: input_boolean.media_kitchen
- id: media_appletv_001
  alias: Apple TV - Toogle Living Room Boolean
  trigger:
  - entity_id: media_player.apple_tv_woonkamer
    platform: state
    to: playing
  - entity_id: media_player.apple_tv_woonkamer
    from: playing
    platform: state
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.apple_tv_woonkamer
        state: playing
      sequence:
      - service: input_boolean.turn_on
        entity_id: input_boolean.media_livingroom
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.media_livingroom
  mode: single
- id: media_appletv_002
  alias: Apple TV - Toogle Kitchen Room Boolean
  trigger:
  - platform: state
    entity_id: media_player.apple_tv_keuken
    to: playing
  - platform: state
    entity_id: media_player.apple_tv_keuken
    from: playing
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.apple_tv_keuken
        state: playing
      sequence:
      - service: input_boolean.turn_on
        entity_id: input_boolean.media_kitchen
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.media_kitchen
- id: vacuum_001
  alias: Vacuum Dennis - Notify - Status Dennis Changes
  initial_state: false
  trigger:
  - platform: template
    value_template: '{{ state_attr(''vacuum.dennis'', ''bin_full'') == true }}'
  - platform: template
    value_template: '{{ state_attr(''vacuum.dennis'', ''status'') == Stuck }}'
  - platform: state
    entity_id:
    - vacuum.dennis
    to: docked
  - platform: state
    entity_id:
    - vacuum.dennis
    to: cleaning
  action:
  - service: script.turn_on
    entity_id:
    - script.notify_vacuum
- id: vacuum_002
  alias: Vacuum Dennis - Notify - Status Woning Changes
  initial_state: false
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis (Werk)
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis (Verlof)
  action:
  - service: script.turn_on
    entity_id:
    - script.notify_vacuum
- id: vacuum_003
  alias: Vacuum Dennis - Cleaned Today
  trigger:
  - platform: state
    entity_id:
    - vacuum.dennis
    to: cleaning
    for:
      minutes: 55
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_cleaned_today
    state: 'off'
  action:
  - service: input_boolean.turn_on
    entity_id:
    - input_boolean.vacuum_cleaned_today
- id: vacuum_004
  alias: Vacuum Dennis - Cleaned Today - Kuishulp
  trigger:
  - platform: state
    entity_id: calendar.kuishulp_agenda
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_cleaned_today
    state: 'off'
  action:
  - service: input_boolean.turn_on
    entity_id:
    - input_boolean.vacuum_cleaned_today
- id: vacuum_005
  alias: Vacuum Dennis - Cleaned Today - Reset
  trigger:
  - platform: time
    at: '23:59:00'
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_cleaned_today
    state: 'on'
  action:
  - service: input_boolean.turn_off
    entity_id:
    - input_boolean.vacuum_cleaned_today
- id: vacuum_006
  alias: Vacuum Dennis - Start when lux enough
  trigger:
  - platform: numeric_state
    entity_id: sensor.hue_sensor_keuken_light_level
    above: 10
    for:
      minutes: 4
  condition:
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Juist Weg
    - Weg
  - condition: state
    state: docked
    entity_id:
    - vacuum.dennis
  - condition: state
    state: 'off'
    entity_id:
    - input_boolean.vacuum_cleaned_today
  - condition: time
    after: 07:20:00
    before: '12:00:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - service: script.turn_on
    entity_id: script.dennis_on
- id: printer_001
  alias: Printer - Notify - Ink Low
  initial_state: false
  trigger:
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_black_ink
    below: 25
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_tri_color_ink
    below: 25
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_black_ink
    below: 10
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_tri_color_ink
    below: 10
  action:
  - service: script.turn_on
    entity_id:
    - script.notify_printer
