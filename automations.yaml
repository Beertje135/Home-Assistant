- id: waste_001
  alias: Herinneringen - Vuilbakken - Bert Thuis
  description: Notificatie voor vuilbakken als Bert thuis komt.
  max_exceeded: silent
  trigger:
  - entity_id: person.bert
    platform: state
    to: home
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.recycleapp_glas
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_papier
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_pmd
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_restafval
      attribute: Days_until
      above: 0
      below: 2
  action:
  - wait_for_trigger:
    - platform: state
      entity_id: device_tracker.router_iphone_bert
      to: home
    continue_on_timeout: false
    timeout: 00:05:00
  - service: script.turn_on
    entity_id: script.notify_waste_ios_bert
  mode: single
- id: waste_002
  alias: Herinneringen - Vuilbakken - Dag ervoor
  description: Herinnering voor vuilbakken sturen de dag ervoor.
  max_exceeded: silent
  trigger:
  - platform: time
    at: '20:30:00'
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis Werk
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis Verlof
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.recycleapp_glas
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_papier
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_pmd
      attribute: Days_until
      above: 0
      below: 2
    - condition: numeric_state
      entity_id: sensor.recycleapp_restafval
      attribute: Days_until
      above: 0
      below: 2
  action:
  - service: script.turn_on
    entity_id: script.notify_waste
- id: waste_003
  alias: Herinneringen - Vuilbakken - Ochtend
  description: Herrinering voor vuilbakken sturen de dag zelf.
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    from: Slapen
    to: Juist Wakker
  condition:
  - condition: state
    entity_id: input_select.woning_status
    state: Juist Wakker
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.recycleapp_glas
      attribute: Days_until
      below: '1'
    - condition: numeric_state
      entity_id: sensor.recycleapp_papier
      attribute: Days_until
      below: '1'
    - condition: numeric_state
      entity_id: sensor.recycleapp_pmd
      attribute: Days_until
      below: '1'
    - condition: numeric_state
      entity_id: sensor.recycleapp_restafval
      attribute: Days_until
      below: '1'
  action:
  - service: script.turn_on
    entity_id: script.notify_waste
- id: music_bathroom_001
  alias: Muziek - Badkamer - Play
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Wakker
    for: 00:00:10
  condition:
  - condition: state
    entity_id: binary_sensor.hue_motion_sensor_1_motion
    state: 'on'
  - condition: state
    entity_id: schedule.radio_auto_aan
    state: 'on'
  - condition: state
    entity_id: input_boolean.music_follow
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Wakker
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: and
    conditions:
    - condition: not
      conditions:
      - condition: state
        state: playing
        entity_id: media_player.apple_homepod_mini_wit_2
    - condition: not
      conditions:
      - condition: state
        state: playing
        entity_id: media_player.apple_homepod_mini_wit_2
        for: 00:30:00
  action:
  - service: script.turn_on
    entity_id: script.radio_bathroom_on
  max_exceeded: silent
  mode: single
- id: music_bathroom_002
  alias: Muziek - Badkamer - Stop
  description: Stop muziek in badkamer
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    for: 0:30:00
    platform: state
    to: 'off'
  - entity_id:
    - light.lightstrip_badkamer
    platform: state
    to: unavailable
    for:
      hours: 0
      minutes: 20
      seconds: 0
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Slapen
  condition:
  - condition: state
    entity_id: media_player.apple_homepod_mini_wit_2
    state: playing
  action:
  - service: script.turn_on
    entity_id: script.radio_bathroom_off
  max_exceeded: silent
  mode: single
- id: music_bathroom_003
  alias: Muziek - Badkamer - Boolean
  description: Zet de speel Boolean aan of uit
  max_exceeded: silent
  mode: single
  trigger:
  - platform: state
    entity_id: media_player.apple_homepod_mini_wit_2
    for:
      seconds: 10
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Wakker
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: media_player.apple_homepod_mini_wit_2
          state: playing
        - condition: state
          entity_id: input_select.woning_status
          state: Juist Wakker
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.music_bathroom_state
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.music_bathroom_state
- id: music_kitchen_001
  alias: Muziek - Keuken - Play
  description: Speel muziek in de keuken
  triggers:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    from: 'off'
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: schedule.radio_auto_aan
    state: 'on'
  - condition: state
    state: 'on'
    entity_id:
    - input_boolean.music_follow
    - binary_sensor.hue_motion_sensor_2_motion
  - condition: and
    conditions:
    - condition: not
      conditions:
      - condition: state
        state: playing
        entity_id: media_player.apple_homepod_mini_wit_1
    - condition: not
      conditions:
      - condition: state
        state: playing
        entity_id: media_player.apple_homepod_mini_wit_1
        for: 00:30:00
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Juist Thuis
    - Juist Wakker
    - Thuis
    - Thuis Werk
    - Thuis Verlof
  - condition: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    state:
    - PowerOff
  - condition: and
    conditions:
    - condition: state
      state: 'off'
      entity_id: input_boolean.media_kitchen
      for:
        hours: 0
        minutes: 1
        seconds: 0
    - condition: state
      state: 'off'
      entity_id: input_boolean.media_livingroom
      for:
        hours: 0
        minutes: 1
        seconds: 0
  actions:
  - entity_id: script.radio_kitchen_on
    action: script.turn_on
  max_exceeded: silent
  mode: single
- id: music_kitchen_002
  alias: Muziek - Keuken - Stop
  description: Stop muziek in keuken
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for: 0:20:00
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: media_player.apple_homepod_mini_wit_1
    state: playing
  - condition: or
    conditions:
    - entity_id: binary_sensor.hue_motion_sensor_2_motion
      for: 0:20:00
      condition: state
      state: 'off'
  action:
  - service: script.turn_on
    data:
      entity_id: script.radio_kitchen_off
  mode: single
- id: music_kitchen_003
  alias: Muziek - Keuken - Stop Tv Aan
  description: Stop muziek in keuken als tv aan gaat
  trigger:
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
  - platform: state
    entity_id: input_boolean.media_kitchen
    to: 'on'
  - platform: state
    entity_id: input_boolean.media_livingroom
    to: 'on'
  condition:
  - condition: state
    entity_id: media_player.apple_homepod_mini_wit_1
    state: playing
  - condition: state
    entity_id: schedule.radio_auto_aan
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: remote.harmony_hub
      attribute: current_activity
      state:
      - TV Decoder
      - Apple tv
      - WebOS
    - condition: state
      entity_id: input_boolean.media_kitchen
      state: 'on'
    - condition: state
      entity_id: input_boolean.media_livingroom
      state: 'on'
  action:
  - service: script.turn_on
    data:
      entity_id: script.radio_kitchen_off
  max_exceeded: silent
  mode: single
- id: music_livingroom_001
  alias: Muziek - Woonkamer - Stop Tv Aan
  description: Stop muziek in woonkamer als tv aan gaat
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
  - platform: state
    entity_id: input_boolean.media_livingroom
    to: 'on'
  condition:
  - condition: state
    entity_id: media_player.apple_homepod_mini_zwart_1
    state: playing
  - condition: or
    conditions:
    - condition: state
      entity_id: remote.harmony_hub
      attribute: current_activity
      state:
      - TV Decoder
      - Apple tv
      - WebOS
    - condition: state
      entity_id: input_boolean.media_livingroom
      state: 'on'
  action:
  - service: script.turn_on
    data:
      entity_id: script.radio_livingroom_off
  mode: single
- id: music_kitchen_004
  alias: Muziek - Keuken - Boolean
  description: Zet de speel Boolean aan of uit
  max_exceeded: silent
  mode: single
  trigger:
  - platform: state
    entity_id: media_player.apple_homepod_mini_wit_1
    for:
      seconds: 10
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.apple_homepod_mini_wit_1
        state: playing
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.music_kitchen_state
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.music_kitchen_state
- id: music_follow_off_001
  alias: Muziek - Overal - Volgen Uit
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: media_player.apple_homepod_mini_wit_1
    platform: state
    from: playing
    to: paused
    for: 0:00:05
  - platform: time
    at: '18:35:00'
  condition:
  - condition: state
    state: 'on'
    entity_id: input_boolean.music_follow
  - condition: or
    conditions:
    - condition: state
      state: 'off'
      entity_id:
      - input_boolean.media_kitchen
      - input_boolean.media_livingroom
    - condition: and
      conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: person.caroline
          state: home
      - condition: state
        state: Thuis Werk
        entity_id: input_select.woning_status
  - condition: or
    conditions:
    - condition: state
      entity_id: remote.harmony_hub
      attribute: current_activity
      state: PowerOff
    - condition: and
      conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: person.caroline
          state: home
      - condition: state
        state: Thuis Werk
        entity_id: input_select.woning_status
  - condition: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    state: PowerOff
  - condition: not
    conditions:
    - condition: state
      state: Juist Weg
      entity_id: input_select.woning_status
  - condition: not
    conditions:
    - condition: state
      state: Weg
      entity_id: input_select.woning_status
  - condition: not
    conditions:
    - condition: state
      state: Slapen
      entity_id: input_select.woning_status
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.music_follow
  mode: single
- id: music_follow_on_001
  alias: Muziek - Overal - Volgen Aan
  description: TBD
  triggers:
  - at: '19:15:00'
    trigger: time
  - entity_id: group.homepods
    to: 'on'
    trigger: state
  - entity_id: input_select.woning_status
    trigger: state
  - entity_id: input_boolean.music_follow
    to: 'off'
    for:
      minutes: 4
    trigger: state
  - entity_id: input_boolean.music_follow
    to: 'off'
    for:
      minutes: 180
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.music_follow
      state: 'off'
      for:
        minutes: 179
    - condition: time
      after: '19:10:00'
    - condition: state
      entity_id: media_player.apple_homepod_mini_wit_1
      state: playing
    - condition: state
      entity_id: media_player.apple_homepod_mini_zwart_1
      state: playing
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.music_follow
      state: 'off'
      for:
        minutes: 3
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Thuis Werk
  actions:
  - metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.music_follow
    action: input_boolean.turn_on
  max_exceeded: silent
  mode: single
- id: music_volume_001
  alias: Muziek - Overal - Volume
  description: TBD
  trigger:
  - platform: state
    entity_id: input_select.woning_status
  - platform: time
    at: 07:30:00
  - platform: state
    entity_id:
    - person.bert
    to: home
  - platform: state
    entity_id:
    - person.bert
    to: not_home
    from: home
  - platform: state
    entity_id:
    - person.caroline
    to: home
  - platform: state
    entity_id:
    - person.caroline
    to: not_home
    from: home
  condition:
  - condition: state
    entity_id: group.homepods
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.radio_kitchen_volume, script.radio_bathroom_volume, script.radio_livingroom_volume
  max_exceeded: silent
  mode: single
- id: doorbell_front_001
  alias: Deurbel - Voordeur - Als Deurbel Gaat
  description: TBD
  max_exceeded: silent
  trigger:
    platform: state
    to: 'on'
    entity_id: binary_sensor.doorbellfront
  action:
  - service: script.turn_on
    entity_id: script.notify_deurbel
  - choose:
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        attribute: current_activity
        state: Apple tv
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_apple_tv_pause
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        attribute: current_activity
        state: TV Decoder
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_belgacom_dvr_pause
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        attribute: current_activity
        state: WebOS
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_lg_tv_pause
    - conditions:
      - condition: state
        entity_id: media_player.apple_tv_4k_2
        state: playing
      sequence:
      - service: media_player.media_pause
        entity_id: media_player.apple_tv_4k_2
    default:
    - service: script.turn_on
      entity_id: script.empty
  - delay: 00:00:15
- id: doorbell_back_001
  alias: Deurbel - Achterdeur - Als Deurbel Gaat
  description: TBD
  max_exceeded: silent
  trigger:
    platform: state
    to: 'on'
    entity_id: binary_sensor.doorbellback
  action:
  - service: script.turn_on
    entity_id: script.notify_deurbel_back
  - choose:
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        state: Apple tv
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_apple_tv_pause
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        state: TV Decoder
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_belgacom_dvr_pause
    - conditions:
      - condition: state
        entity_id: remote.harmony_hub
        state: WebOS
      sequence:
      - service: script.turn_on
        entity_id: script.remote_harmony_hub_lg_tv_pause
    - conditions:
      - condition: state
        entity_id: media_player.apple_tv_4k_2
        state: playing
      sequence:
      - service: media_player.media_pause
        entity_id: media_player.apple_tv_4k_2
    default:
    - service: script.turn_on
      entity_id: script.empty
  - delay: 00:00:15
- id: ventilation_upstairs_001
  alias: HVAC - Airco Boven - Koelen Aan/Uit volgens Buiten Temperatuur
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    above: sensor.climate_elmo_attribute_current_temperature
    id: Elmo Warm
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    below: sensor.climate_elmo_attribute_current_temperature
    id: Elmo Kouder
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    above: sensor.climate_trix_attribute_current_temperature
    id: Trix Warm
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    below: sensor.climate_trix_attribute_current_temperature
    id: Trix Kouder
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    above: 23.5
    id: Buiten Warm
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    below: 23
    id: Buiten Kouder
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id:
    - climate.elmo
    attribute: current_temperature
    above: 23
    id: Elmo Kamer Warm
  - platform: numeric_state
    entity_id:
    - climate.trix
    above: 23
    id: Trix Kamer Warm
    attribute: current_temperature
  condition:
  - condition: state
    entity_id: sensor.season
    state: summer
    enabled: false
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Elmo Warm
        - Trix Warm
        - Buiten Warm
        - Elmo Kamer Warm
        - Trix Kamer Warm
      - condition: numeric_state
        entity_id: sensor.hue_sensor_buiten_temperature
        above: 23.5
        enabled: false
      sequence:
      - condition: state
        entity_id: input_boolean.cooling_upstairs
        state: 'off'
      - condition: state
        entity_id: climate.ons_huisje
        state: 'off'
      - metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.cooling_upstairs
        action: input_boolean.turn_on
    default:
    - condition: state
      entity_id: input_boolean.cooling_upstairs
      state: 'on'
    - entity_id: input_boolean.cooling_upstairs
      action: input_boolean.turn_off
  max_exceeded: silent
- id: ventilation_downstairs_001
  alias: HVAC - Airco Beneden - Koelen Aan/Uit volgens Buiten Temperatuur
  description: TBD
  trigger:
  - platform: template
    id: Keuken Warm
    value_template: '{{states("sensor.hue_sensor_buiten_temperature")|float(0) - 1
      - state_attr("climate.keuken", "current_temperature")|float(0) > 0 }}'
  - platform: template
    id: Keuken Kouder
    value_template: '{{states("sensor.hue_sensor_buiten_temperature")|float(0) + 1
      - state_attr("climate.keuken", "current_temperature")|float(0) < 0 }}'
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    above: 23.5
    id: Buiten Warm
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    for:
      hours: 0
      minutes: 5
      seconds: 0
    below: 23
    id: Buiten Kouder
  condition:
  - condition: state
    entity_id: sensor.season
    state: summer
    enabled: false
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Keuken Warm
        - Buiten Warm
      - condition: numeric_state
        entity_id: sensor.hue_sensor_buiten_temperature
        above: 23.5
      sequence:
      - condition: state
        entity_id: climate.ons_huisje
        state: 'off'
      - condition: state
        entity_id: input_boolean.cooling_downstairs
        state: 'off'
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.cooling_downstairs
    default:
    - condition: state
      entity_id: input_boolean.cooling_downstairs
      state: 'on'
    - service: input_boolean.turn_off
      entity_id: input_boolean.cooling_downstairs
  max_exceeded: silent
- id: ventilation_upstairs_002
  alias: HVAC - Airco Boven - Trix Aan/Uit volgens Boolean
  description: TBD
  trigger:
  - entity_id: input_boolean.cooling_upstairs
    platform: state
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: input_select.woning_status
      state: Op Vakantie
  - condition: state
    entity_id: schedule.slapen_trix
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_upstairs
        state: 'on'
      - condition: state
        entity_id: switch.hue_smart_plug_5
        state: 'off'
      - condition: state
        entity_id: climate.airco_trix
        attribute: hvac_action
        state: 'off'
      - condition: state
        entity_id: binary_sensor.ewelink_ds01_02_opening
        state: 'off'
      sequence:
      - device_id: f0bb97139c00ae23445e7cc8eb4edd42
        domain: climate
        entity_id: climate.airco_trix
        type: set_hvac_mode
        hvac_mode: cool
      - service: climate.set_temperature
        data:
          temperature: 22
        target:
          entity_id: climate.airco_trix
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_upstairs
        state: 'off'
      - condition: state
        entity_id: climate.airco_trix
        attribute: hvac_action
        state: cooling
      sequence:
      - device_id: f0bb97139c00ae23445e7cc8eb4edd42
        domain: climate
        entity_id: climate.airco_trix
        type: set_hvac_mode
        hvac_mode: 'off'
  max_exceeded: silent
- id: ventilation_downstairs_002
  alias: HVAC - Airco Beneden
  description: TBD
  trigger:
  - entity_id: input_boolean.cooling_downstairs
    platform: state
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
  action:
  - service: script.turn_on
    entity_id: script.notify_cooling_downstairs
  max_exceeded: silent
- id: media_keuken_001
  alias: Media - Wijzig Keuken Boolean
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: media_player.plex_plex_for_ios_ipad
    platform: state
    to: playing
  - entity_id: media_player.plex_plex_for_ios_ipad
    platform: state
    from: playing
  - entity_id: media_player.plex_plex_for_windows_pcbert
    platform: state
    to: playing
  - entity_id: media_player.plex_plex_for_windows_pcbert
    platform: state
    from: playing
  - entity_id: media_player.plex_plex_web_microsoft_edge_windows
    platform: state
    to: playing
  - entity_id: media_player.plex_plex_web_microsoft_edge_windows
    platform: state
    from: playing
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: media_player.plex_plex_for_ios_ipad
          state: playing
        - condition: state
          entity_id: media_player.plex_plex_for_windows_pcbert
          state: playing
        - condition: state
          entity_id: media_player.plex_plex_web_microsoft_edge_windows
          state: playing
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.media_kitchen
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.media_kitchen
- id: media_woonkamer_001
  alias: Media - Wijzig Woonkamer Boolean
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: media_player.apple_tv_4k_1
    platform: state
    to: playing
  - entity_id: media_player.apple_tv_4k_1
    from: playing
    platform: state
    for: 00:01:00
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.apple_tv_4k_1
        state: playing
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.media_livingroom
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.media_livingroom
  mode: single
- id: media_radio_001
  alias: Radio - Wijzig Huidige Radio Station 1
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.radio_station
  action:
  - service: input_text.set_value
    data:
      entity_id: input_text.radio_station_current
      value: '{{ states(''input_select.radio_station'') }}'
- id: vacuum_001
  alias: Notificatie - Stofzuiger Dusty - Status Dusty Wijzigt
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: vacuum.dusty
    attribute: bin_full
    to: 'true'
  - platform: state
    entity_id: vacuum.dusty
    attribute: status
    to: Stuck
  - platform: state
    entity_id: vacuum.dusty
    to: docked
  - platform: state
    entity_id: vacuum.dusty
    to: cleaning
  action:
  - service: script.turn_on
    entity_id: script.notify_vacuum
  mode: single
- id: vacuum_002
  alias: Notificatie - Stofzuiger Dusty - Status Woning Wijzigt 2
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis Werk
  - platform: state
    entity_id: input_select.woning_status
    from: Juist Thuis
    to: Thuis Verlof
  action:
  - service: script.turn_on
    entity_id: script.notify_vacuum
- id: vacuum_003
  alias: Toestellen - Stofzuiger Dusty - Stof Gezogen Vandaag Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: vacuum.dusty
    to: cleaning
    for: 0:55:00
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_clean_today
    state: 'on'
  action:
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.vacuum_clean_today
    data: {}
  max_exceeded: silent
  mode: single
- id: vacuum_004
  alias: Toestellen - Stofzuiger Dusty - Stof Gezogen Vandaag Uit Kuishulp
  description: TBD
  trigger:
  - platform: state
    entity_id: calendar.kuishulp_agenda
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_clean_today
    state: 'on'
  action:
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.vacuum_clean_today
    data: {}
  max_exceeded: silent
  mode: single
- id: vacuum_005
  alias: Toestellen - Stofzuiger Dusty - Stof Gezogen Vandaag Uit Reset
  description: TBD
  trigger:
  - platform: time
    at: '23:59:00'
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_clean_today
    state: 'on'
  action:
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.vacuum_clean_today
    data: {}
  max_exceeded: silent
  mode: single
- id: vacuum_006
  alias: Toestellen - Stofzuiger Dusty - Start
  description: TBD
  trigger:
  - platform: state
    entity_id: input_boolean.vacuum_clean_today
    to: 'on'
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Weg
    for:
      hours: 1
      minutes: 30
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.hue_motion_sensor_2_light_level
    above: '10'
    for:
      minutes: 4
  condition:
  - condition: state
    state: 'on'
    entity_id: input_boolean.vacuum_clean_today
  - condition: state
    entity_id: input_select.woning_status
    state: Weg
  - condition: state
    state: docked
    entity_id: vacuum.dusty
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_2_light_level
    above: '10'
  action:
  - service: script.turn_on
    entity_id: script.dusty_on
  max_exceeded: silent
  mode: single
- id: vacuum_007
  alias: Toestellen - Stofzuiger Dusty - Stof Gezogen Vandaag Aan
  description: TBD
  trigger:
  - entity_id: person.caroline
    platform: state
    to: Werk (Caro)
  - entity_id: person.bert
    platform: state
    to: Werk (Bert)
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Weg
    for:
      hours: 1
      minutes: 30
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.vacuum_clean_today
    state: 'off'
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: person.caroline
        state: Werk (Caro)
      - condition: state
        entity_id: person.bert
        state: Werk (Bert)
    - condition: state
      entity_id: input_select.woning_status
      state: Weg
      for:
        hours: 1
        minutes: 30
        seconds: 0
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.vacuum_clean_today
  max_exceeded: silent
  mode: single
- id: printer_001
  alias: Herinneringen - Printer - Inkt bijna op
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_black_ink
    below: 10
  - platform: numeric_state
    entity_id: sensor.hp_deskjet_3700_series_tri_color_ink
    below: 10
  action:
  - service: script.turn_on
    entity_id: script.notify_printer
  - delay: 86400
- id: house_001
  alias: Ons Huisje - Status Wijzigt
  description: TBD
  triggers:
  - entity_id: input_select.woning_status
    trigger: state
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Thuis
      sequence:
      - data: {}
        target:
          entity_id:
          - script.dusty_off
        action: script.turn_on
      - metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.music_follow
          - input_boolean.light_downstairs
        action: input_boolean.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Wakker
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.music_follow
          - input_boolean.light_downstairs
        action: input_boolean.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Thuis
      sequence:
      - entity_id:
        - script.dusty_off
        action: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Thuis Verlof
      sequence:
      - entity_id:
        - script.dusty_off
        action: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Thuis Werk
      sequence:
      - entity_id:
        - script.dusty_off
        action: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      sequence:
      - entity_id:
        - script.all_light_off
        - script.all_music_off
        - script.harmony_hub_powered_off
        action: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
      sequence:
      - action: script.light_livingroom_off
        metadata: {}
        data: {}
      - action: script.all_switch_off
        metadata: {}
        data: {}
      - action: script.all_music_off
        metadata: {}
        data: {}
      - action: script.all_remote_off
        metadata: {}
        data: {}
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      sequence:
      - entity_id:
        - script.all_all_off
        - script.dusty_on
        action: script.turn_on
      - entity_id: switch.hue_smart_plug_5, switch.hue_smart_plug_6
        action: switch.turn_off
    - conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      sequence:
      - entity_id: script.all_all_off
        action: script.turn_on
    default:
    - entity_id: script.empty
      action: script.turn_on
  - entity_id: script.notify_woning_status
    action: script.turn_on
  max_exceeded: silent
- id: house_003
  alias: Ons Huisje - Wijzig de Status - Bewoner of Bezoeker
  description: TBD
  triggers:
  - entity_id: group.bewoners
    trigger: state
  - entity_id: binary_sensor.bezoek
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
    - condition: and
      conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.woning_status
          state: Weg
        - condition: state
          entity_id: input_select.woning_status
          state: Op Vakantie
      - condition: state
        entity_id: group.bewoners
        state: home
    - condition: and
      conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.woning_status
          state: Juist Thuis
        - condition: state
          entity_id: input_select.woning_status
          state: Thuis
        - condition: state
          entity_id: input_select.woning_status
          state: Thuis Werk
        - condition: state
          entity_id: input_select.woning_status
          state: Thuis Verlof
      - condition: state
        entity_id: group.bewoners
        state: not_home
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'off'
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Thuis
      - condition: or
        conditions:
        - condition: state
          entity_id: group.bewoners
          state: home
        - condition: state
          entity_id: binary_sensor.bezoek
          state: 'on'
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.workday_sensor
          state: 'off'
        - condition: state
          entity_id: schedule.werk
          state: 'on'
        alias: Wanneer Verlof
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: or
        conditions:
        - condition: state
          entity_id: group.bewoners
          state: home
        - condition: state
          entity_id: binary_sensor.bezoek
          state: 'on'
  actions:
  - entity_id: input_select.woning_status
    data_template:
      option: "{% if (states('input_select.woning_status') in ['Weg', 'Op Vakantie']
        and states('group.bewoners') in ['home']) or (states('input_select.woning_status')
        in ['Weg'] and states('binary_sensor.bezoek') in ['on']) %}\n  Juist Thuis\n{%
        elif states('input_select.woning_status') in ['Juist Thuis', 'Thuis', 'Thuis
        Werk', 'Thuis Verlof'] and states('group.bewoners') in ['not_home'] and states('binary_sensor.bezoek')
        in ['off'] %}\n  Juist Weg\n{% elif states('input_select.woning_status') in
        ['Juist Weg'] and (states('group.bewoners') in ['home'] or states('binary_sensor.bezoek')
        in ['on']) and (states('binary_sensor.workday_sensor') in ['off'] and states('schedule.werk')
        in ['on']) %}\n  Thuis Verlof\n{% elif states('input_select.woning_status')
        in ['Juist Weg'] and (states('group.bewoners') in ['home'] or states('binary_sensor.bezoek')
        in ['on']) and states('schedule.werk') in ['on'] and (states('binary_sensor.workday_sensor')
        in ['on']) %}\n  Thuis Werk\n{% elif states('input_select.woning_status')
        in ['Juist Weg'] and (states('group.bewoners') in ['home'] or states('binary_sensor.bezoek')
        in ['on']) %}\n  Thuis\n{% elif states('input_select.woning_status') in ['Juist
        Weg'] %}\n  Juist Weg\n{% elif states('input_select.woning_status') in ['Juist
        Thuis'] %}\n  Juist Thuis\n{% elif states('input_select.woning_status') in
        ['Juist Wakker'] %}\n  Juist Wakker\n{% elif states('input_select.woning_status')
        in ['Thuis'] %}\n  Thuis\n{% elif states('input_select.woning_status') in
        ['Thuis Verlof'] %}\n  Thuis Verlof\n{% elif states('input_select.woning_status')
        in ['Thuis Werk'] %}\n  Thuis Werk\n{% elif states('input_select.woning_status')
        in ['Weg'] %}\n  Weg\n{% elif states('input_select.woning_status') in ['Slapen']
        %}\n  Slapen\n{% elif states('input_select.woning_status') in ['Op Vakantie']
        %}\n  Op Vakantie\n{% endif %}\n"
    action: input_select.select_option
  max_exceeded: silent
- id: house_004
  alias: Ons Huisje - Wijzig de Status - Timer
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Thuis
    for:
      minutes: 10
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Wakker
    for:
      minutes: 10
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Weg
    for:
      minutes: 10
  - platform: state
    entity_id: input_select.woning_status
    to: Weg
    for:
      hours: 24
  condition:
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Juist Wakker
    - Juist Weg
    - Juist Thuis
    - Weg
  action:
  - service: input_select.select_option
    entity_id: input_select.woning_status
    data_template:
      option: "{% if states('input_select.woning_status') in ['Juist Thuis', 'Juist
        Wakker'] and (states('binary_sensor.workday_sensor') in ['off'] and states('schedule.werk')
        in ['on']) %}\n  Thuis Verlof\n{% elif (states('input_select.woning_status')
        in ['Juist Thuis', 'Juist Wakker']) and states('schedule.werk') in ['on']
        and (('binary_sensor.workday_sensor') in ['on']) %}\n  Thuis Werk\n{% elif
        states('input_select.woning_status') in ['Juist Thuis', 'Juist Wakker'] %}\n
        \ Thuis\n{% elif states('input_select.woning_status') in ['Juist Weg'] %}\n
        \ Weg\n{% else %}\n  Op Vakantie\n{% endif %}\n"
- id: house_005
  alias: Ons Huisje - Wijzig de Status - Juist Wakker
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
  condition:
  - condition: state
    entity_id: input_select.woning_status
    state: Slapen
    for:
      hours: 1
  - condition: state
    entity_id: schedule.slapen
    state: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.woning_status
      option: Juist Wakker
  max_exceeded: silent
- id: house_006
  alias: Ons Huisje - Wijzig de Status - Thuis (...) AAN (als Thuis)
  description: TBD
  triggers:
  - entity_id:
    - schedule.werk
    to: 'on'
    trigger: state
  - entity_id: input_select.woning_status
    to: Thuis
    for:
      minutes: 1
    trigger: state
  conditions:
  - condition: state
    entity_id: schedule.werk
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.workday_sensor
        state: 'off'
      sequence:
      - entity_id: input_select.woning_status
        data:
          option: Thuis Verlof
        action: input_select.select_option
    default:
    - entity_id: input_select.woning_status
      data:
        option: Thuis Werk
      action: input_select.select_option
  max_exceeded: silent
  mode: single
- id: house_007
  alias: Ons Huisje - Wijzig de Status - Thuis (...) UIT
  description: TBD
  triggers:
  - entity_id:
    - schedule.werk
    to: 'off'
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
  actions:
  - entity_id: input_select.woning_status
    data:
      option: Thuis
    action: input_select.select_option
  max_exceeded: silent
  mode: single
- id: house_008
  alias: Ons Huisje - Wijzig de Status - Op Vakantie
  description: TBD
  trigger:
  - entity_id:
    - sensor.home_nearest_distance
    platform: numeric_state
    above: 55000
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: state
    entity_id: sensor.home_nearest_direction_of_travel
    state: away_from
    enabled: false
  - condition: state
    entity_id: input_select.woning_status
    state: Weg
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.woning_status
      option: Op Vakantie
    enabled: true
  max_exceeded: silent
- id: amplifier_livingroom_001
  alias: Amplifier Woonkamer - Uit - Apple TV Speelt Niet
  description: TBD
  trigger:
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: standby
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: 'off'
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: paused
    for:
      hours: 0
      minutes: 30
      seconds: 0
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: idle
    for:
      hours: 0
      minutes: 30
      seconds: 0
  condition:
  - condition: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    state: Apple tv
  - condition: state
    entity_id: media_player.apple_tv_4k_1
    state:
    - paused
    - standby
    - idle
    - 'off'
  action:
  - service: script.turn_on
    entity_id: script.harmony_hub_powered_off
  max_exceeded: silent
- id: amplifier_livingroom_005
  alias: Amplifier Woonkamer - Aan - Apple TV Speelt
  description: TBD
  trigger:
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: idle
    from: standby
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: idle
    from: 'off'
  - platform: state
    entity_id: media_player.apple_tv_4k_1
    to: playing
  condition:
  - condition: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    state: PowerOff
  action:
  - service: script.turn_on
    entity_id: script.harmony_hub_apple_tv
  max_exceeded: silent
  mode: single
- id: home_owner_001
  alias: Personen - Bewoner - Thuis of Weg
  description: TBD
  trigger:
  - platform: state
    entity_id:
    - person.bert
    to: home
  - platform: state
    entity_id:
    - person.bert
    to: not_home
    from: home
  - platform: state
    entity_id:
    - person.caroline
    to: home
  - platform: state
    entity_id:
    - person.caroline
    to: not_home
    from: home
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' %}\n  script.notify_tracker_caro_thuis\n{%
        elif trigger.from_state.entity_id == 'person.bert' %}\n  script.notify_tracker_bert_thuis\n{%
        endif %}\n"
  max_exceeded: silent
- id: home_owner_002
  alias: Personen - Bewoner - Thuis of Weg 2
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: person.caroline
    to: home
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' %}\n  script.notify_tracker_caro_thuis_ios_bert\n{%
        endif %}\n"
- id: home_owner_003
  alias: Personen - Bewoner - Bezoeker Babysit Afmelden
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: person.caroline,person.bert
    to: home
    from: not_home
  condition:
  - condition: state
    entity_id: input_boolean.visitor
    state: 'on'
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' %}\n  script.notify_bezoeker_babysit_ios_caro\n{%
        elif trigger.from_state.entity_id == 'person.bert' %}\n  script.notify_bezoeker_babysit_ios_bert\n{%
        endif %}\n"
- id: home_owner_004
  alias: Personen - Bewoner - Aan Opvang
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: person.caroline
    to:
    - Nona & Pepe
    - Mimi & Fleri
    - Daycare
    for:
      minutes: 2
  - platform: state
    entity_id: person.bert
    to:
    - Nona & Pepe
    - Mimi & Fleri
    - Daycare
    for:
      minutes: 2
  - platform: state
    entity_id: person.caroline
    to:
    - School De Wingerd
    - BKO Toverbos
    for:
      minutes: 1
  - platform: state
    entity_id: person.bert
    to:
    - School De Wingerd
    - BKO Toverbos
    for:
      minutes: 1
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' %}\n  script.notify_tracker_caro_zones\n{%
        elif trigger.from_state.entity_id == 'person.bert' %}\n  script.notify_tracker_bert_zones\n{%
        endif %}\n"
- id: home_owner_005
  alias: Personen - Bewoner - Aan Checkpoint
  description: TBD
  trigger:
  - platform: state
    entity_id: person.caroline
    to:
    - Checkpoint 1
    - Checkpoint 2
    - Checkpoint 3
    - Checkpoint 4
    - Checkpoint 5
  - platform: state
    entity_id: person.bert
    to:
    - Mechelen Station
    - Willebroek Station
    - Checkpoint 3
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: and
    conditions:
    - condition: state
      entity_id: schedule.slapen
      state: 'off'
    - condition: time
      after: '12:00:00'
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' %}\n  script.notify_tracker_caro_zones\n{%
        elif trigger.from_state.entity_id == 'person.bert' %}\n  script.notify_tracker_bert_zones\n{%
        endif %}\n"
  max_exceeded: silent
- id: home_owner_006
  alias: Personen - Bewoner - Aan Hospital
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: template
    value_template: '{{ states(''person.caroline'') in [''Hospital St-Augustinus'',
      ''Hospital Edegem'', ''Hospital Reet'', ''Hospital Middelheim''] }}'
    for:
      minutes: 3
  - platform: template
    value_template: '{{ states(''person.bert'') in [''Hospital St-Augustinus'', ''Hospital
      Edegem'', ''Hospital Reet'', ''Hospital Middelheim''] }}'
    for:
      minutes: 3
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if trigger.from_state.entity_id == 'person.caroline' and states('person.bert')
        not in ['Hospital St-Augustinus', 'Hospital Edegem', 'Hospital Reet', 'Hospital
        Middelheim'] %}\n  script.notify_tracker_caro_zones\n{% elif trigger.from_state.entity_id
        == 'person.bert' and states('person.caroline') not in ['Hospital St-Augustinus',
        'Hospital Edegem', 'Hospital Reet', 'Hospital Middelheim'] %}\n  script.notify_tracker_bert_zones\n{%
        endif %}\n"
- id: home_owner_bert_001
  alias: Personen - Bert - Aan Willebroek Station
  description: TBD
  trigger:
  - entity_id: person.bert
    platform: state
    to: Willebroek Station
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: time
    before: '12:00:00'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_willebroek_mechelen_ios_bert
  max_exceeded: silent
- id: home_owner_bert_002
  alias: Personen - Bert - Aan Mechelen Station
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: person.bert
    platform: state
    to: Mechelen Station
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    data_template:
      entity_id: "{% if (states('sensor.time') <= \"13:00\") %}\n  script.notify_nmbs_mechelen_brussel_ios_bert\n{%
        else %}\n  script.notify_nmbs_mechelen_willebroek_ios_bert\n{% endif %}\n"
- id: home_owner_bert_003
  alias: Personen - Bert - Aan Brussel Station
  description: TBD
  trigger:
  - entity_id: person.bert
    platform: state
    to: Brussel Station
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: time
    after: '12:00:00'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_brussel_mechelen_ios_bert
  max_exceeded: silent
- id: home_owner_bert_004
  alias: Personen - Bert - Aan Willebroek Station Change
  description: TBD
  trigger:
  - entity_id: sensor.nmbs_template
    platform: state
  condition:
  - condition: state
    entity_id: person.bert
    state: Willebroek Station
  - condition: time
    before: '12:00:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_willebroek_mechelen_ios_bert
  max_exceeded: silent
- id: home_owner_bert_005
  alias: Personen - Bert - Aan Mechelen Station Change Wil
  description: TBD
  trigger:
  - entity_id: sensor.nmbs_3_template
    platform: state
  condition:
  - condition: state
    entity_id: person.bert
    state: Mechelen Station
  - condition: time
    after: '12:00:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_mechelen_willebroek_ios_bert
  max_exceeded: silent
- id: home_owner_bert_006
  alias: Personen - Bert - Aan Mechelen Station Change Brus
  description: TBD
  trigger:
  - entity_id: sensor.nmbs_2_template
    platform: state
  condition:
  - condition: state
    entity_id: person.bert
    state: Mechelen Station
  - condition: time
    before: '12:00:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_mechelen_brussel_ios_bert
  max_exceeded: silent
- id: home_owner_bert_007
  alias: Personen - Bert - Aan Brussel Station Change
  description: TBD
  trigger:
  - entity_id: sensor.nmbs_4_template
    platform: state
  condition:
  - condition: state
    entity_id: person.bert
    state: Brussel Station
  - condition: time
    after: '12:00:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_nmbs_brussel_mechelen_ios_bert
  max_exceeded: silent
- id: visitor_001
  alias: Personen - Bezoeker - Aangekomen
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id:
    - person.mark
    - person.mama
    - person.andy
    - person.karen
    - person.marcus
    - person.niki
    - person.oma
    - person.nancy
    - person.thomas
    - person.papa
    to: home
  action:
  - service: script.notify_tracker_bezoeker_thuis_ios_bert
    data_template:
      bezoeker: '{{ trigger.to_state.attributes.friendly_name }}'
      bezoeker_state: '{{ trigger.to_state.state }}'
  - service: script.notify_tracker_bezoeker_thuis_ios_caro
    data_template:
      bezoeker: '{{ trigger.to_state.attributes.friendly_name }}'
      bezoeker_state: '{{ trigger.to_state.state }}'
- id: visitor_babysit_001
  alias: Personen - Bezoeker - Babysit Aangekomen
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: calendar.babysit_agenda
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.visitor
    state: 'off'
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.visitor
- id: visitor_babysit_002
  alias: Personen - Bezoeker Babysit - Vertrokken
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: calendar.babysit_agenda
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.visitor
    state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.notify_bezoeker_babysit_ios_caro, script.notify_bezoeker_babysit_ios_bert
- id: homeassistant_001
  alias: Herinneringen - HomeAssistant - Restart Check
  description: TBD
  max_exceeded: silent
  trigger:
  - event: start
    platform: homeassistant
  action:
  - delay: 00:00:30
  - service: script.turn_on
    entity_id: script.restart_hassio
- id: homeassistant_002
  alias: Herinneringen - HomeAssistant - Update Beschikbaar
  description: TBD
  trigger:
  - platform: state
    entity_id: binary_sensor.home_assistant_website_update_available
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_hassio_update
  max_exceeded: silent
- id: homeassistant_003
  alias: Herinneringen - HomeAssistant - Update Beschikbaar HACS
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: sensor.hacs
    above: 0
  action:
  - service: script.turn_on
    entity_id: script.notify_hacs_update
  max_exceeded: silent
- id: homeassistant_004
  alias: Herinneringen - HomeAssistant - Volle toeren
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: numeric_state
    entity_id: sensor.memory_use_percent,sensor.disk_use_percent_home,sensor.processor_use
    above: 90
  action:
  - service: script.turn_on
    entity_id: script.notify_hassio_overtime
- id: harmony_001
  alias: Harmony Hub - Boolean Change based on Hub Status (1A)
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: remote.harmony_hub
  condition:
  - condition: not
    conditions:
    - condition: state
      state: unavailable
      entity_id: remote.harmony_hub
  action:
  - service: input_select.select_option
    entity_id: input_select.harmony_hub
    data_template:
      option: "{% if state_attr('remote.harmony_hub', 'current_activity') == \"PowerOff\"
        %}\n  PowerOff\n{% elif state_attr('remote.harmony_hub', 'current_activity')
        == \"Alexa\" %}\n  Alexa\n{% elif state_attr('remote.harmony_hub', 'current_activity')
        == \"TV Decoder\" %}\n  TV Decoder\n{% elif state_attr('remote.harmony_hub',
        'current_activity') == \"WebOS\" %}\n  WebOS\n{% elif state_attr('remote.harmony_hub',
        'current_activity') == \"Nintendo Switch\" %}\n  Nintendo Switch\n{% elif
        state_attr('remote.harmony_hub', 'current_activity') == \"Apple tv\" %}\n
        \ Apple tv\n{% else %}\n  PowerOff\n{% endif %}\n"
- id: harmony_002
  alias: Harmony Hub - Boolean Changes (2A)
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.harmony_hub
  condition:
  - condition: not
    conditions:
    - condition: state
      state: unavailable
      entity_id: remote.harmony_hub
  action:
  - service: remote.turn_on
    data_template:
      entity_id: remote.harmony_hub
      activity: '{% if states(''input_select.harmony_hub'') in [''PowerOff''] %} -1
        {% elif states(''input_select.harmony_hub'') in [''Alexa''] %} 35750774 {%
        elif states(''input_select.harmony_hub'') in [''TV Decoder''] %} 42338759
        {% elif states(''input_select.harmony_hub'') in [''WebOS''] %} 42338833 {%
        elif states(''input_select.harmony_hub'') in [''Apple tv''] %} 29425458 {%
        elif states(''input_select.harmony_hub'') in [''Nintendo Switch''] %} 30703348
        {% endif %}'
- id: harmony_start_001
  alias: Harmony Hub - Start Tv avond
  description: TBD
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_motion_sensor_3_motion
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.visitor
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: state
    entity_id: schedule.tv_auto_aan
    state: 'on'
  - condition: or
    conditions:
    - condition: device
      type: is_off
      device_id: d4bfe137373a4685b374eabfe782bce7
      entity_id: remote.harmony_hub
      domain: remote
    - condition: device
      type: is_on
      device_id: d4bfe137373a4685b374eabfe782bce7
      entity_id: switch.harmony_hub_alexa
      domain: switch
  action:
  - service: script.turn_on
    entity_id: script.harmony_hub_apple_tv
  max_exceeded: silent
- id: heating_state_house_001
  alias: HVAC - Verwarming - Weg dus Eco Mode
  description: Zet de verwarming lager als we langer van huis zijn
  trigger:
  - entity_id: input_select.woning_status
    platform: state
    to: Weg
    for:
      minutes: 90
  - entity_id: person.caroline
    platform: state
    to: Werk (Caro)
  - entity_id: person.bert
    platform: state
    to: Werk (Bert)
  - entity_id:
    - sensor.home_nearest_distance
    platform: numeric_state
    above: 10000
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Weg
      for:
        minutes: 90
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: person.caroline
        state: Werk (Caro)
      - condition: state
        entity_id: person.bert
        state: Werk (Bert)
    - condition: and
      conditions:
      - entity_id: sensor.home_nearest_distance
        condition: numeric_state
        above: 1000
      - condition: state
        entity_id: sensor.home_nearest_direction_of_travel
        state: away_from
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: eco
  action:
  - service: script.turn_on
    entity_id: script.evo_status_economy
  - service: script.turn_on
    entity_id: script.notify_heating_economy
  max_exceeded: silent
- id: heating_state_house_002
  alias: HVAC - Verwarming - Thuis of Juist Wakker dus Auto Mode
  description: TBD
  trigger:
  - entity_id: input_select.woning_status
    platform: state
    to: Thuis
    for:
      minutes: 1
  - entity_id: input_select.woning_status
    platform: state
    to: Juist Thuis
  - entity_id: input_select.woning_status
    platform: state
    to: Juist Wakker
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Wakker
  action:
  - service: script.turn_on
    entity_id: script.evo_status_auto
  max_exceeded: silent
- id: heating_state_house_003
  alias: HVAC - Verwarming Beneden - Slapen dus Verlagen
  description: TBD
  trigger:
  - entity_id: input_select.woning_status
    platform: state
    to: Slapen
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.evo_status_custom
  max_exceeded: silent
- id: heating_state_house_004
  alias: HVAC - Verwarming - Vakantie dus alles Uit
  description: TBD
  trigger:
  - entity_id: input_select.woning_status
    platform: state
    to: Op Vakantie
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: hvac_mode
      state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.evo_status_heating_off
  max_exceeded: silent
- id: heating_timer_001
  alias: HVAC - Verwarming Badkamer -  Timer Overwrite Auto Mode
  description: TBD
  trigger:
  - platform: state
    entity_id: climate.badkamer
    to: Permanent
    for:
      minutes: 180
  - platform: state
    entity_id: climate.badkamer
    to: Temporary
    for:
      minutes: 180
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.badkamer
      attribute: preset_mode
      state: none
  action:
  - service: script.turn_on
    entity_id: script.evo_zone_bathroom_reset
  max_exceeded: silent
- id: heating_preheat_001
  alias: HVAC - Verwarming Preheat - Aan
  description: TBD
  trigger:
  - entity_id: person.bert
    platform: state
    to:
    - Mechelen Station
    - Willebroek Station
  - entity_id: person.caroline
    platform: state
    to:
    - Checkpoint 1
    - Checkpoint 3
    - Checkpoint 4
    - Checkpoint 5
  - entity_id:
    - sensor.home_nearest_distance
    platform: numeric_state
    below: 10000
  condition:
  - condition: state
    entity_id: input_boolean.pre_heat
    state: 'off'
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: eco
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: away
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.pre_heat
  max_exceeded: silent
- id: heating_preheat_001b
  alias: HVAC - Verwarming Preheat - Aan na Vakantie
  description: TBD
  triggers:
  - entity_id:
    - sensor.home_nearest_distance
    below: 50000
    for:
      hours: 0
      minutes: 1
      seconds: 0
    trigger: numeric_state
  - entity_id:
    - sensor.home_nearest_distance
    below: 10000
    for:
      hours: 0
      minutes: 1
      seconds: 0
    trigger: numeric_state
  conditions:
  - condition: state
    entity_id: input_boolean.pre_heat
    state: 'off'
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: state
    entity_id: input_select.woning_status
    state: Op Vakantie
  - condition: or
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: eco
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: away
    enabled: false
  actions:
  - metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.pre_heat
    action: input_boolean.turn_on
  max_exceeded: silent
- id: heating_preheat_002
  alias: HVAC - Verwarming Preheat - Uit
  description: TBD
  trigger:
  - entity_id: input_select.woning_status
    platform: state
    to: Thuis
    for:
      minutes: 1
  - entity_id: input_select.woning_status
    platform: state
    to: Thuis Werk
    for:
      minutes: 1
  - entity_id: input_select.woning_status
    platform: state
    to: Thuis Verlof
    for:
      minutes: 1
  - entity_id: input_select.woning_status
    platform: state
    to: Juist Thuis
  - entity_id: input_select.woning_status
    platform: state
    to: Juist Wakker
  condition:
  - condition: state
    entity_id: input_boolean.pre_heat
    state: 'on'
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.pre_heat
  max_exceeded: silent
- id: heating_preheat_003
  alias: HVAC - Verwarming Preheat - Auto Mode Aan
  description: TBD
  trigger:
  - platform: state
    entity_id: input_boolean.pre_heat
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: eco
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: away
  action:
  - service: script.turn_on
    entity_id: script.evo_status_auto
  - service: script.turn_on
    entity_id: script.notify_heating_preheat
  max_exceeded: silent
- id: heating_preheat_004
  alias: HVAC - Verwarming Preheat - Auto Mode Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: input_boolean.pre_heat
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: state
    entity_id: input_select.woning_status
    state: Weg
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: eco
    - condition: state
      entity_id: climate.ons_huisje
      attribute: preset_mode
      state: away
  action:
  - service: script.turn_on
    entity_id: script.evo_status_economy
  max_exceeded: silent
- id: heating_window_open_001
  alias: HVAC - Verwarming Boven - Raam Open
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: climate.trix
    attribute: current_temperature
    below: 15.5
  - platform: numeric_state
    entity_id: climate.elmo
    attribute: current_temperature
    below: 15.5
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_01_opening
    to: 'on'
    for:
      hours: 2
      minutes: 0
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_02_opening
    to: 'on'
    for:
      hours: 2
      minutes: 0
      seconds: 0
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.ewelink_ds01_01_opening
      state: 'on'
    - condition: state
      entity_id: binary_sensor.ewelink_ds01_02_opening
      state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    below: 15.5
  action:
  - service: script.turn_on
    entity_id: script.notify_heating_upstairs
  max_exceeded: silent
- id: heating_outside_temp_001
  alias: HVAC - Verwarming - Aan/Uit volgens Buiten Temperatuur
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    below: 21
  - platform: numeric_state
    entity_id: sensor.hue_sensor_buiten_temperature
    above: 21.5
  condition:
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.hue_sensor_buiten_temperature
      above: 21.5
    - condition: numeric_state
      entity_id: sensor.hue_sensor_buiten_temperature
      below: 21
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.season
      state: summer
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Op Vakantie
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.hue_sensor_buiten_temperature
        above: 21.5
      sequence:
      - service: input_boolean.turn_off
        entity_id: input_boolean.heating
    default:
    - service: input_boolean.turn_on
      metadata: {}
      data: {}
      target:
        entity_id:
        - input_boolean.heating
  max_exceeded: silent
- id: heating_season_001
  alias: HVAC - Verwarming - Aan/Uit volgens Seizoen
  description: TBD
  trigger:
  - entity_id: sensor.season
    platform: state
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.season
        state: summer
      sequence:
      - service: input_boolean.turn_off
        entity_id: input_boolean.heating
    default:
    - service: input_boolean.turn_on
      metadata: {}
      data: {}
      target:
        entity_id:
        - input_boolean.heating
  max_exceeded: silent
- id: heating_boolean_001
  alias: HVAC - Verwarming - Aan/Uit volgens Boolean
  description: TBD
  trigger:
  - entity_id: input_boolean.heating
    platform: state
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.heating
        state: 'on'
      sequence:
      - service: script.turn_on
        entity_id: script.evo_status_auto, script.notify_heating
    default:
    - service: script.turn_on
      entity_id: script.evo_status_heating_off, script.notify_heating
  max_exceeded: silent
- id: light_livingroom_hue_switch_001
  alias: Licht - Hue Woonkamer - Boolean (A)
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: light.hue_white_filament_globe_g125_1
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_filament_globe_g125_1
      state: 'on'
    - condition: state
      entity_id: light.hue_white_filament_globe_g125_1
      state: 'off'
  action:
  - service: input_boolean.turn_{{ trigger.to_state.state }}
    entity_id: input_boolean.light_livingroom
- id: light_livingroom_hue_switch_002
  alias: Licht - Hue Woonkamer - Boolean (B)
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_boolean.light_livingroom
  action:
    service: light.turn_{{ trigger.to_state.state }}
    entity_id: light.hue_white_filament_globe_g125_1
- id: light_porch_001
  alias: Licht - Veranda - Aan
  description: TBD
  triggers:
  - entity_id: input_select.woning_status
    to: Juist Wakker
    trigger: state
  - entity_id: input_select.woning_status
    to: Juist Thuis
    trigger: state
  - entity_id: sensor.hue_sensor_veranda_light_level
    below: 40
    trigger: numeric_state
  - entity_id: sensor.hue_sensor_veranda_light_level
    above: 10
    trigger: numeric_state
  - entity_id: sensor.hue_sensor_veranda_light_level
    below: 7
    trigger: numeric_state
  - entity_id: remote.harmony_hub
    attribute: current_activity
    trigger: state
  - entity_id: input_boolean.media_kitchen
    to: 'on'
    for:
      seconds: 35
    trigger: state
  - entity_id: input_boolean.media_livingroom
    to: 'on'
    for:
      seconds: 35
    trigger: state
  - entity_id: input_boolean.media_kitchen
    to: 'off'
    for:
      seconds: 5
    trigger: state
  - entity_id: input_boolean.media_livingroom
    to: 'off'
    for:
      seconds: 5
    trigger: state
  - at: 07:15:00
    trigger: time
  conditions:
  - condition: state
    entity_id: input_boolean.light_downstairs
    state: 'on'
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.keep_christmas_on
      state: 'on'
    - condition: numeric_state
      entity_id: sensor.hue_sensor_veranda_light_level
      below: 40
  actions:
  - entity_id: script.light_porch_on
    action: script.turn_on
  max_exceeded: silent
  mode: single
- id: light_porch_002
  alias: Licht - Veranda - Aan Motion
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_motion_sensor_2_motion
  condition:
  - condition: state
    entity_id: input_boolean.light_downstairs
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.hue_sensor_veranda_light_level
    below: 40
  - condition: state
    entity_id: group.licht_veranda
    state: 'off'
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_porch_on
- id: light_porch_003
  alias: Licht - Veranda - Uit
  description: TBD
  triggers:
  - entity_id: input_select.woning_status
    to: Slapen
    trigger: state
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for:
      minutes: 15
    to: 'off'
    trigger: state
  - entity_id: binary_sensor.hue_motion_sensor_3_motion
    for:
      minutes: 15
    to: 'off'
    trigger: state
  - entity_id: input_boolean.light_downstairs
    to: 'off'
    trigger: state
  - entity_id: sensor.hue_sensor_veranda_light_level
    above: 40
    trigger: numeric_state
  conditions:
  - condition: state
    entity_id: group.licht_veranda
    state: 'on'
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: state
        entity_id: binary_sensor.hue_motion_sensor_2_motion
        state: 'off'
        for:
          minutes: 15
      - condition: state
        entity_id: binary_sensor.hue_motion_sensor_3_motion
        state: 'off'
        for:
          minutes: 15
      - condition: state
        entity_id: input_boolean.keep_christmas_on
        state: 'off'
    - condition: and
      conditions:
      - condition: numeric_state
        entity_id: sensor.hue_sensor_veranda_light_level
        above: 40
      - condition: state
        entity_id: input_boolean.keep_christmas_on
        state: 'off'
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: input_boolean.light_downstairs
      state: 'off'
  actions:
  - entity_id: scene.veranda_uit
    action: scene.turn_on
  max_exceeded: silent
  mode: single
- id: light_kitchen_001
  alias: Licht - Keuken - Aan
  description: TBD
  triggers:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for:
      minutes: 5
    to: 'off'
    trigger: state
  - entity_id: input_select.woning_status
    trigger: state
  - entity_id: input_boolean.light_downstairs
    to: 'on'
    trigger: state
  - entity_id: input_boolean.media_kitchen
    to: 'on'
    for:
      seconds: 35
    trigger: state
  - entity_id: input_boolean.media_livingroom
    to: 'on'
    for:
      seconds: 35
    trigger: state
  - entity_id: input_boolean.media_kitchen
    to: 'off'
    for:
      seconds: 5
    trigger: state
  - entity_id: input_boolean.media_livingroom
    to: 'off'
    for:
      seconds: 5
    trigger: state
  - entity_id: remote.harmony_hub
    attribute: current_activity
    trigger: state
  conditions:
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_2_light_level
    below: 105
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: state
    entity_id: input_boolean.light_downstairs
    state: 'on'
  actions:
  - entity_id: script.light_kitchen_on
    action: script.turn_on
  max_exceeded: silent
- id: light_kitchen_002
  alias: Licht - Keuken - Aan Motion
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    platform: state
    to: 'on'
  - platform: numeric_state
    entity_id: sensor.hue_motion_sensor_2_light_level
    below: 105
  condition:
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_2_light_level
    below: 105
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: light.lightstrip_keuken
      attribute: brightness
      below: 250
    - condition: state
      entity_id: group.licht_keuken
      state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.light_kitchen_on
  max_exceeded: silent
- id: light_kitchen_003
  alias: Licht - Keuken - Uit
  description: TBD
  triggers:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for:
      minutes: 15
    to: 'off'
    trigger: state
  - entity_id: sensor.hue_motion_sensor_2_light_level
    above: 90
    trigger: numeric_state
  - entity_id: input_boolean.light_downstairs
    to: 'off'
    for:
      seconds: 5
    trigger: state
  - entity_id: input_boolean.media_livingroom
    to: 'off'
    for:
      seconds: 5
    trigger: state
  conditions:
  - condition: state
    entity_id: group.licht_keuken
    state: 'on'
  - condition: state
    entity_id: binary_sensor.hue_motion_sensor_2_motion
    state: 'off'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.lightstrip_keuken
  max_exceeded: silent
- id: light_kitchen_004
  alias: Licht - Keuken - Uit - Night
  description: TBD
  triggers:
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for: 0:01:00
    to: 'off'
    trigger: state
  - entity_id: light.lightstrip_keuken
    for: 0:05:00
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: group.licht_keuken
    state: 'on'
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Slapen
    - Juist Weg
    - Weg
    - Op Vakantie
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.lightstrip_keuken
  max_exceeded: silent
  mode: single
- id: light_kitchen_005
  alias: Licht - Keuken - Aan Slapen
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Slapen
  condition:
  - condition: state
    entity_id: group.licht_keuken
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_kitchen_on
- id: light_livingroom_001
  alias: Licht - Woonkamer - Aan
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_boolean.media_livingroom
    to: 'on'
    for:
      seconds: 30
  - platform: state
    entity_id: input_boolean.media_livingroom
    to: 'off'
    for:
      seconds: 5
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
  - platform: numeric_state
    entity_id: sensor.hue_motion_sensor_3_light_level
    above: 20
  condition:
  - condition: state
    entity_id: input_boolean.light_downstairs
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_3_light_level
    below: 20
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_on
- id: light_livingroom_002
  alias: Licht - Woonkamer - Aan Motion
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_motion_sensor_3_motion
  condition:
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: state
        entity_id: light.hue_white_filament_globe_g125_1
        state: 'off'
      - condition: state
        entity_id: switch.hue_smart_plug_2
        state: 'off'
    - condition: state
      entity_id: group.licht_woonkamer
      state: 'off'
  - condition: state
    entity_id: input_boolean.light_downstairs
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_3_light_level
    below: 20
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_on
- id: light_livingroom_003
  alias: Licht - Woonkamer - Aan Kerstmis
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Wakker
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Thuis
  condition:
  - condition: state
    entity_id:
    - input_boolean.light_downstairs
    - input_boolean.keep_christmas_on
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_off
- id: light_livingroom_004
  alias: Licht - Woonkamer - Uit
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: numeric_state
    entity_id: sensor.hue_motion_sensor_3_light_level
    above: 50
  - platform: state
    entity_id: input_boolean.light_downstairs
    to: 'off'
  condition:
  - condition: state
    entity_id: group.licht_woonkamer
    state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_off
- id: light_livingroom_005
  alias: Licht - Woonkamer - Uit Geen beweging
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_3_motion
    for:
      minutes: 10
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_3_motion
    for:
      minutes: 15
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: group.licht_woonkamer
    state: 'on'
  - condition: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    state:
    - PowerOff
    - Alexa
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_off
- id: light_livingroom_006
  alias: Licht - Woonkamer - Uit Nacht
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_3_motion
    for:
      minutes: 1
    platform: state
    to: 'off'
  - platform: state
    entity_id: group.licht_woonkamer
    to: 'on'
    for:
      minutes: 2
  - platform: state
    entity_id: group.licht_woonkamer
    to: 'on'
    for:
      minutes: 3
  condition:
  - condition: state
    entity_id: group.licht_woonkamer
    state: 'on'
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Slapen
    - Juist Weg
    - Weg
  action:
  - service: script.turn_on
    entity_id: script.light_livingroom_off
- id: light_bureau_001
  alias: Licht - Bureau - Aan
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_4_motion
    platform: state
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_4_light_level
    below: 70
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_b22_1
      state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.light_bureau_on
- id: light_bureau_002
  alias: Licht - Bureau - Uit
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_4_motion
    for:
      minutes: 1
    platform: state
    to: 'off'
    enabled: false
  - entity_id: binary_sensor.hue_motion_sensor_4_motion
    for:
      minutes: 3
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_4_motion
    for:
      minutes: 5
    platform: state
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_b22_1
      state: 'on'
  - condition: state
    entity_id: binary_sensor.hue_motion_sensor_4_motion
    state: 'off'
  action:
  - service: scene.turn_on
    entity_id: scene.bureau_uit
  max_exceeded: silent
- id: light_dressing_001
  alias: Licht - Dressing - Aan
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_1_light_level
    below: 45
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_1
      state: 'off'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_2
      state: 'off'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_3
      state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.light_dressing_on
  max_exceeded: silent
- id: light_dressing_002
  alias: Licht - Dressing - Uit
  description: TBD
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    for:
      minutes: 1
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    for:
      minutes: 3
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    for:
      minutes: 5
    platform: state
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_1
      state: 'on'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_2
      state: 'on'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_3
      state: 'on'
  - condition: state
    entity_id: binary_sensor.hue_motion_sensor_1_motion
    state: 'off'
  - condition: state
    entity_id: input_boolean.light_dressing_stay_on
    state: 'off'
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.dressing_uit
    metadata: {}
  max_exceeded: silent
- id: light_dressing_003
  alias: Licht - Dressing - Altijd Aan Boolean Changes
  description: TBD
  trigger:
  - entity_id: input_boolean.light_dressing_stay_on
    platform: state
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.light_dressing_stay_on
        state: 'on'
      sequence:
      - service: scene.turn_on
        target:
          entity_id: scene.dressing_normaal
        metadata: {}
    default:
    - service: scene.turn_on
      target:
        entity_id: scene.dressing_uit
      metadata: {}
  max_exceeded: silent
- id: light_dressing_004
  alias: Licht - Dressing - Altijd Aan Boolean OFF after timer
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    for:
      minutes: 45
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.light_dressing_stay_on
    state: 'on'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.light_dressing_stay_on
- id: light_dressing_005
  alias: Licht - Dressing - Aan Update  kleur bij Slapen
  description: TBD
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Slapen
  condition:
  - condition: numeric_state
    entity_id: sensor.hue_motion_sensor_1_light_level
    below: 45
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_1
      state: 'on'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_2
      state: 'on'
    - condition: state
      entity_id: light.hue_white_filament_bulb_g93_3
      state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_dressing_on
  max_exceeded: silent
- id: light_bathroom_001
  alias: Licht - Badkamer - Aan
  description: TBD
  max_exceeded: silent
  trigger:
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
    for:
      seconds: 10
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
    for:
      seconds: 15
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
    for:
      seconds: 20
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
    for:
      seconds: 25
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'on'
    for:
      seconds: 30
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'off'
    for:
      seconds: 5
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'off'
    for:
      seconds: 10
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'off'
    for:
      seconds: 20
  - entity_id: binary_sensor.hue_motion_sensor_1_motion
    platform: state
    to: 'off'
    for:
      seconds: 30
  - platform: state
    entity_id: light.lightstrip_badkamer
    from: unavailable
  - platform: state
    entity_id: input_select.woning_status
    to: slapen
    for: 00:06:05
  condition:
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: state
        entity_id: binary_sensor.bezoek
        state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.light_bathroom_on
  mode: single
- id: light_bedroom_elmo_004
  alias: Licht - Elmo - Wekker Ochtend
  description: Elmo Wakker maken als de wekker gaat
  trigger:
  - platform: state
    entity_id:
    - schedule.slapen_elmo
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.kids_wekker
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
  - condition: time
    before: '10:00:00'
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.hue_smart_plug_6
      state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_light_elmo
  - delay:
      hours: 0
      minutes: 1
      seconds: 2
      milliseconds: 0
  - condition: state
    entity_id: input_boolean.kids_wekker
    state: 'on'
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
    state: 'off'
  - service: script.turn_on
    entity_id: script.light_elmo
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 2dbd7ce304ab902393dcc8f4596b397a
    entity_id: switch.hue_smart_plug_6
    domain: switch
  max_exceeded: silent
  mode: single
- id: light_bedroom_elmo_006
  alias: Licht - Elmo - Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
    to: 'on'
    for:
      minutes: 30
  - platform: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
    from: Unavailable
  condition:
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
    state: 'on'
  action:
  - service: scene.turn_on
    entity_id: scene.elmo_uit
  max_exceeded: silent
- id: light_bedroom_elmo_003
  alias: Licht - Elmo - Alarm Wekker
  description: TBD
  trigger:
  - platform: state
    entity_id: input_button.elmo_alarm
  action:
  - service: script.turn_on
    data: {}
    target:
      entity_id: script.notificatie_wekker_elmo
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
    state: 'off'
  - service: scene.turn_on
    data:
      transition: 120
    target:
      entity_id: scene.elmo_ochtend
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 2dbd7ce304ab902393dcc8f4596b397a
    entity_id: switch.hue_smart_plug_6
    domain: switch
  max_exceeded: silent
  mode: single
- id: light_bedroom_trix_001
  alias: Licht - Trix - Wekker Ochtend
  description: TBD
  trigger:
  - platform: state
    entity_id:
    - schedule.slapen_trix
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.kids_wekker
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
  - condition: time
    before: '10:00:00'
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.hue_smart_plug_5
      state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.notify_light_elmo
  - delay:
      hours: 0
      minutes: 1
      seconds: 2
      milliseconds: 0
  - condition: state
    entity_id: input_boolean.kids_wekker
    state: 'on'
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
    state: 'off'
  - service: script.turn_on
    entity_id: script.light_trix
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  max_exceeded: silent
  mode: single
- id: light_bedroom_trix_003
  alias: Licht - Trix - Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
    to: 'on'
    for:
      minutes: 30
  - platform: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
    from: Unavailable
  condition:
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
    state: 'on'
  action:
  - service: scene.turn_on
    entity_id: scene.trix_uit
  max_exceeded: silent
- id: light_bedroom_trix_004
  alias: Licht - Trix - Alarm Wekker
  description: TBD
  trigger:
  - platform: state
    entity_id: input_button.trix_alarm
  action:
  - service: script.turn_on
    data: {}
    target:
      entity_id: script.notificatie_wekker_trix
  - condition: state
    entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
    state: 'off'
  - service: scene.turn_on
    data:
      transition: 60
    target:
      entity_id: scene.trix_ochtend
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  max_exceeded: silent
  mode: single
- id: light_gardenshed_001
  alias: Licht - Tuinhuis - Aan
  description: TBD
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    to: 'on'
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_lightstrip_outdoor_2m_1
      state: 'off'
  - condition: numeric_state
    entity_id: sensor.hue_outdoor_sensor_1_light_level
    below: 2
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.keep_christmas_on
        state: 'on'
      sequence:
      - service: scene.turn_on
        entity_id: scene.tuinhuis_kerstmis
    default:
    - service: scene.turn_on
      entity_id: scene.tuinhuis_normaal
  max_exceeded: silent
- id: light_gardenshed_002
  alias: Licht - Tuinhuis - Uit
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: sensor.hue_outdoor_sensor_1_light_level
    above: 2
  - entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 3
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 3
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 4
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 4
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: light.hue_lightstrip_outdoor_2m_1
    state: 'on'
  - condition: state
    entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    state: 'off'
  action:
  - service: scene.turn_on
    entity_id: scene.tuinhuis_uit
  max_exceeded: silent
- id: light_garden2_001
  alias: Licht - Tuin2 (alles) - Aan
  description: TBD
  trigger:
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    to: 'on'
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    to: 'on'
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_2_motion
    to: 'on'
  - platform: state
    entity_id: input_boolean.light_garden_stay_on
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: group.bewoners
      state: home
    - condition: state
      entity_id: binary_sensor.bezoek
      state: 'on'
    - condition: state
      entity_id: input_select.woning_status
      state: Op Vakantie
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_2
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_5
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_6
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_1
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_3
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_4
      state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.light_garden_stay_on
      state: 'on'
    - condition: and
      conditions:
      - condition: or
        conditions:
        - condition: state
          state: unavailable
          entity_id: binary_sensor.hue_outdoor_sensor_2_motion
        - condition: numeric_state
          entity_id: sensor.hue_outdoor_sensor_2_light_level
          below: 8
      - condition: or
        conditions:
        - condition: state
          state: unavailable
          entity_id: binary_sensor.hue_outdoor_sensor_3_motion
        - condition: numeric_state
          entity_id: sensor.hue_outdoor_sensor_3_light_level
          below: 8
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
    - condition: or
      conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: person.bert
          state: home
        - condition: not
          conditions:
          - condition: state
            entity_id: person.bert
            state: home
            for:
              hours: 0
              minutes: 10
              seconds: 0
      - condition: and
        conditions:
        - condition: state
          entity_id: person.caroline
          state: home
        - condition: not
          conditions:
          - condition: state
            entity_id: person.caroline
            state: home
            for:
              hours: 0
              minutes: 10
              seconds: 0
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.keep_christmas_on
        state: 'on'
      sequence:
      - service: scene.turn_on
        entity_id: scene.tuin2_kerstmis
    default:
    - service: scene.turn_on
      entity_id: scene.tuin2_normaal
  max_exceeded: silent
- id: light_garden2_002
  alias: Licht - Tuin2 (alles) - Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Slapen
    for:
      minutes: 5
  - platform: numeric_state
    entity_id: sensor.hue_outdoor_sensor_3_light_level
    above: 10
  - entity_id:
    - binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 5
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 5
    platform: state
    to: 'off'
  - entity_id:
    - binary_sensor.hue_outdoor_sensor_2_motion
    for:
      minutes: 15
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 6
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 6
    platform: state
    to: 'off'
  - entity_id:
    - binary_sensor.hue_outdoor_sensor_2_motion
    for:
      minutes: 16
    platform: state
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: group.licht_tuin_group1
      state: 'on'
    - condition: state
      entity_id: group.licht_tuin_group2
      state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_1_motion
      state: 'off'
      for:
        minutes: 5
    - condition: numeric_state
      entity_id: sensor.hue_outdoor_sensor_2_light_level
      above: 10
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_1_motion
      state: unavailable
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_3_motion
      state: 'off'
      for:
        minutes: 5
    - condition: numeric_state
      entity_id: sensor.hue_outdoor_sensor_2_light_level
      above: 15
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_3_motion
      state: unavailable
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_2_motion
      state: 'off'
      for:
        minutes: 15
    - condition: numeric_state
      entity_id: sensor.hue_outdoor_sensor_2_light_level
      above: 2
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_2_motion
      state: unavailable
  - condition: state
    entity_id: input_boolean.light_garden_stay_on
    state: 'off'
  action:
  - service: scene.turn_on
    entity_id: scene.tuin2_uit
  max_exceeded: silent
- id: light_garden1_001
  alias: Licht - Tuin1 (deel) - Aan
  description: TBD
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Thuis
  - platform: state
    entity_id: input_select.woning_status
    to: Thuis Werk
  - platform: state
    entity_id: input_select.woning_status
    to: Thuis Verlof
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    to: 'on'
  - platform: state
    entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    to: 'on'
  - platform: state
    entity_id: input_boolean.light_garden_stay_on
    to: 'on'
  - platform: numeric_state
    entity_id: sensor.hue_outdoor_sensor_2_light_level
    below: 11
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: group.licht_tuin_group2
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_2
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_5
      state: 'off'
    - condition: state
      entity_id: light.hue_lily_outdoor_spot_light_rgbcct_6
      state: 'off'
  - condition: or
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Slapen
      - condition: state
        entity_id: binary_sensor.hue_motion_sensor_2_motion
        state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.light_garden_stay_on
      state: 'on'
    - condition: and
      conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.hue_outdoor_sensor_3_motion
          state: unavailable
        - condition: numeric_state
          entity_id: sensor.hue_outdoor_sensor_3_light_level
          below: 8
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.hue_outdoor_sensor_2_motion
          state: unavailable
        - condition: numeric_state
          entity_id: sensor.hue_outdoor_sensor_2_light_level
          below: 8
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.keep_christmas_on
        state: 'on'
      sequence:
      - service: scene.turn_on
        entity_id: scene.tuin1_kerstmis
    default:
    - service: scene.turn_on
      entity_id: scene.tuin1_normaal
  max_exceeded: silent
- id: light_garden1_002
  alias: Licht - Tuin1 (deel) - Uit
  description: TBD
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Weg
  - platform: state
    entity_id: input_select.woning_status
    to: Op Vakantie
  - platform: state
    entity_id: input_select.woning_status
    to: Slapen
    for:
      minutes: 3
  - platform: numeric_state
    entity_id: sensor.hue_outdoor_sensor_3_light_level
    above: 10
  - platform: state
    entity_id: input_boolean.light_garden_stay_on
    to: 'off'
  - platform: time
    at: input_datetime.light_garden_off
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    to: TV Decoder
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    to: WebOS
  - platform: state
    entity_id: remote.harmony_hub
    attribute: current_activity
    to: Apple tv
  - entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 1
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 1
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_3_motion
    for:
      minutes: 2
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_outdoor_sensor_1_motion
    for:
      minutes: 2
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for:
      minutes: 5
    platform: state
    to: 'off'
  - entity_id: binary_sensor.hue_motion_sensor_2_motion
    for:
      minutes: 6
    platform: state
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: or
      conditions:
      - condition: template
        value_template: '{{ states(''sensor.time'') > ( states.input_datetime.light_garden_off.attributes.timestamp
          | int - 120 ) | timestamp_custom(''%H:%M'', False) }}'
      - condition: numeric_state
        entity_id: sensor.hue_outdoor_sensor_2_light_level
        above: 15
    - condition: or
      conditions:
      - condition: state
        entity_id: remote.harmony_hub
        attribute: current_activity
        state:
        - TV Decoder
        - WebOS
        - Apple tv
      - condition: state
        entity_id: input_select.woning_status
        state:
        - Weg
        - Op Vakantie
        - Slapen
  - condition: state
    entity_id: group.licht_tuin_group1
    state: 'on'
  - condition: state
    entity_id: group.licht_tuin_group2
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_1_motion
      state: 'off'
      for:
        minutes: 1
    - condition: numeric_state
      entity_id: sensor.hue_outdoor_sensor_2_light_level
      above: 15
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_3_motion
      state: 'off'
      for:
        minutes: 1
    - condition: numeric_state
      entity_id: sensor.hue_outdoor_sensor_2_light_level
      above: 15
    - condition: state
      entity_id: binary_sensor.hue_outdoor_sensor_3_motion
      state: unavailable
  - condition: state
    entity_id: input_boolean.light_garden_stay_on
    state: 'off'
  action:
  - service: scene.turn_on
    entity_id: scene.tuin1_uit
  max_exceeded: silent
  mode: single
- id: light_garden_001
  alias: Licht - Tuin - Altijd Aan Boolean OFF after timer
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Weg
  - platform: state
    entity_id: input_select.woning_status
    to: Op Vakantie
  - platform: state
    entity_id: input_select.woning_status
    to: Slapen
    for:
      minutes: 3
  - entity_id: input_boolean.light_garden_stay_on
    for:
      minutes: 300
    platform: state
    to: 'on'
  - entity_id: input_boolean.sun_up_down
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.light_garden_stay_on
    state: 'on'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.light_garden_stay_on
- id: light_sun_001
  alias: Licht - Zon - Onder/Op
  description: TBD
  max_exceeded: silent
  trigger:
  - platform: sun
    event: sunset
    offset: -01:00:00
  - platform: sun
    event: sunrise
    offset: 01:00:00
  condition: []
  action:
  - choose:
    - conditions:
      - condition: sun
        before: sunset
        before_offset: -01:05:00
        after: sunrise
        after_offset: 00:55:00
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.sun_up_down
    default:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.sun_up_down
  mode: single
- id: battery_001
  alias: Herinneringen - Batterij - Bijna Leeg
  description: TBD
  max_exceeded: silent
  trigger:
  - below: '9'
    entity_id:
    - sensor.hue_outdoor_sensor_3_power
    - sensor.hue_outdoor_sensor_1_power
    - sensor.hue_outdoor_sensor_2_power
    - sensor.hue_motion_sensor_1_power
    - sensor.hue_motion_sensor_2_power
    - sensor.hue_motion_sensor_3_power
    - sensor.hue_motion_sensor_4_power
    - sensor.hue_dimmer_switch_1_power
    - sensor.hue_dimmer_switch_2_power
    platform: numeric_state
  action:
  - entity_id: script.notify_battery
    service: script.turn_on
  mode: single
- id: energy_solar_status_001
  alias: Energy - Solar - ON/OFF
  description: TBD
  trigger:
  - platform: numeric_state
    entity_id: sensor.solaredge_current_power
    above: 500
  condition:
  - condition: state
    entity_id: sun.sun
    state: above_horizon
  - condition: state
    entity_id: input_select.woning_status
    state:
    - Thuis
    - Thuis Werk
    - Thuis Verlof
  action:
  - service: script.turn_on
    entity_id: script.notify_energy_solar_status
  max_exceeded: silent
- id: camera_trix_002
  alias: Camera - Trix - Notificatie
  description: Notify Papa als de camera van Trix aangaat. Ochtend
  trigger:
  - platform: state
    entity_id: switch.hue_smart_plug_5
    from: 'off'
    to: 'on'
  condition:
  - condition: time
    after: 06:00:00
    before: 08:00:00
  action:
  - service: script.turn_on
    entity_id: script.notify_camera_trix_ios_bert
  max_exceeded: silent
- id: camera_001
  alias: Camera - Trix - Aan
  description: Zet de camera van de kinderen aan als hij niet aan staat. Avond
  triggers:
  - entity_id: input_select.woning_status
    to: Juist Thuis
    trigger: state
  - entity_id:
    - schedule.slapen_trix
    from:
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: schedule.slapen_trix
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
  - condition: state
    entity_id: switch.hue_smart_plug_5
    state: 'off'
  actions:
  - type: turn_on
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  - target:
      entity_id: scene.trix_nacht
    metadata: {}
    action: scene.turn_on
    data: {}
  - type: turn_on
    device_id: 674244c8975cc98513b28d64ee9640f8
    entity_id: c207a4fee03cd95526e976165dcaa31b
    domain: switch
  max_exceeded: silent
  mode: single
- id: camera_002
  alias: Camera - Uit
  description: Zet de camera van de kinderen uit als hij nog aanstaat. Ochtend
  triggers:
  - at: 07:30:00
    alias: Weekdagen
    id: Weekdagen
    trigger: time
  - at: 08:00:00
    alias: Weekend
    id: Weekend
    trigger: time
  conditions:
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: trigger
        id:
        - Weekdagen
      - condition: time
        weekday:
        - fri
        - thu
        - wed
        - tue
        - mon
    - condition: and
      conditions:
      - condition: trigger
        id:
        - Weekend
      - condition: time
        weekday:
        - sat
        - sun
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.hue_smart_plug_5
      state: 'on'
    - condition: state
      entity_id: switch.hue_smart_plug_6
      state: 'on'
  - condition: state
    entity_id: input_boolean.kids_wekker
    state: 'on'
  actions:
  - type: turn_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  - type: turn_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_6
    domain: switch
  - type: turn_off
    device_id: 674244c8975cc98513b28d64ee9640f8
    entity_id: c207a4fee03cd95526e976165dcaa31b
    domain: switch
  - type: turn_off
    device_id: 54566db9daccc8f4c4b8c998352d4297
    entity_id: b7dab33b8e51fdb957a9456806835ae7
    domain: switch
  max_exceeded: silent
  mode: single
- id: camera_003
  alias: Camera - Toon in UI
  description: Toon of verberg de camera in de UI
  max_exceeded: silent
  trigger:
  - platform: time
    at: 05:30:00
  - platform: time
    at: 07:45:00
  - platform: time
    at: '19:00:00'
  - platform: time
    at: '22:30:00'
  action:
  - choose:
    - conditions:
      - condition: time
        after: 05:25:00
        before: 07:45:00
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.toon_camera
    - conditions:
      - condition: time
        after: '18:55:00'
        before: '22:30:00'
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.toon_camera
    default:
    - service: input_boolean.turn_off
      entity_id: input_boolean.toon_camera
- id: alarm_001
  alias: Herinneringen - Kinderen - Boekje en Papje tijd
  description: Laat weten dat het tijd is voor een boekje en een papje
  max_exceeded: silent
  trigger:
  - platform: time
    at: input_datetime.elmo_boekje_papje
  action:
  - entity_id: script.notify_time_book_pap
    service: script.turn_on
  mode: single
- id: verbruik_001
  alias: Notificatie Verbruik - Energie te hoog voor capaciteitsverbruik
  description: Een melding geven voor te hoog vebruik als er capaciteitstarief is
  trigger:
  - above: '4000'
    entity_id: sensor.ons_huisje_total_consumption_active_power
    platform: numeric_state
    for:
      hours: 0
      minutes: 5
      seconds: 0
  action:
  - entity_id: script.notify_energy_use_high
    service: script.turn_on
  max_exceeded: silent
  mode: single
- id: '1678182217199'
  alias: Dimmer - Trix
  description: ''
  trigger:
  - device_id: a4427e80b4e0ef094fbe611eecc42ed5
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: turn_on
    id: Aan Uit Knop Trix
  - device_id: a4427e80b4e0ef094fbe611eecc42ed5
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_up
    id: Dim Omhoog Trix
  - device_id: a4427e80b4e0ef094fbe611eecc42ed5
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_down
    id: Dim Omlaag Trix
  - device_id: a4427e80b4e0ef094fbe611eecc42ed5
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: turn_off
    id: Hue Knop Trix
  condition: []
  action:
  - if:
    - condition: trigger
      id: Aan Uit Knop Trix
    then:
    - service: script.turn_on
      data: {}
      target:
        entity_id: script.light_trix
  - if:
    - condition: trigger
      id: Dim Omhoog Trix
    then:
    - device_id: 3367f3c425886d0440b202930d54e37a
      domain: light
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
      type: brightness_increase
    - device_id: ed0e528849b708e45fac831de50795f1
      domain: light
      entity_id: light.hue_white_filament_globe_g125_2
      type: brightness_increase
  - if:
    - condition: trigger
      id: Dim Omlaag Trix
    then:
    - device_id: 3367f3c425886d0440b202930d54e37a
      domain: light
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
      type: brightness_decrease
    - device_id: ed0e528849b708e45fac831de50795f1
      domain: light
      entity_id: light.hue_white_filament_globe_g125_2
      type: brightness_decrease
  - if:
    - condition: trigger
      id: Hue Knop Trix
    then:
    - type: toggle
      device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
      entity_id: switch.hue_smart_plug_5
      domain: switch
  mode: single
- id: '1678182729666'
  alias: Dimmer - Elmo
  description: ''
  trigger:
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: turn_on
    id: Aan Uit Knop Elmo
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_up
    id: Dim Omhoog Elmo
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_down
    id: Dim Omlaag Elmo
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: turn_off
    id: ' Hue Knop Elmo'
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_long_press
    subtype: turn_on
    id: Aan Uit Knop Elmo Continu
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_double_press
    subtype: turn_on
    id: Aan Uit Knop Elmo Dubbel
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_long_press
    subtype: turn_off
    id: ' Hue Knop Elmo Continu'
  - device_id: 3b1bcb1c3e3dd4802a47d8ae449f8566
    domain: zha
    platform: device
    type: remote_button_double_press
    subtype: turn_off
    id: ' Hue Knop Elmo Dubbel'
  condition: []
  action:
  - if:
    - condition: trigger
      id: Aan Uit Knop Elmo
    then:
    - service: script.turn_on
      data: {}
      target:
        entity_id: script.light_elmo
  - if:
    - condition: trigger
      id: Aan Uit Knop Elmo Continu
    then:
    - service: scene.turn_on
      target:
        entity_id: scene.elmo_uit
      metadata: {}
    - service: scene.turn_on
      target:
        entity_id: scene.trix_uit
      metadata: {}
  - if:
    - condition: trigger
      id: Aan Uit Knop Elmo Dubbel
    then:
    - service: scene.turn_on
      target:
        entity_id: scene.elmo_normaal
      metadata: {}
  - if:
    - condition: trigger
      id: Dim Omhoog Elmo
    then:
    - device_id: 673f99e0527c87283f7527fdfacec67d
      domain: light
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
      type: brightness_increase
  - if:
    - condition: trigger
      id: Dim Omlaag Elmo
    then:
    - device_id: 673f99e0527c87283f7527fdfacec67d
      domain: light
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
      type: brightness_decrease
  - if:
    - condition: trigger
      id: ' Hue Knop Elmo'
    then:
    - type: toggle
      device_id: 2dbd7ce304ab902393dcc8f4596b397a
      entity_id: switch.hue_smart_plug_6
      domain: switch
  - if:
    - condition: trigger
      id: ' Hue Knop Elmo Continu'
    then:
    - type: turn_off
      device_id: 2dbd7ce304ab902393dcc8f4596b397a
      entity_id: switch.hue_smart_plug_6
      domain: switch
    - type: turn_off
      device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
      entity_id: switch.hue_smart_plug_5
      domain: switch
  - if:
    - condition: trigger
      id: ' Hue Knop Elmo Dubbel'
    then:
    - type: turn_on
      device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
      entity_id: switch.hue_smart_plug_5
      domain: switch
    - type: turn_on
      device_id: 2dbd7ce304ab902393dcc8f4596b397a
      entity_id: switch.hue_smart_plug_6
      domain: switch
  mode: single
- id: '1678374330527'
  alias: Camera - Elmo - Aan
  description: Zet de camera van Elmo aan als hij niet aan staat. Avond
  triggers:
  - entity_id: input_select.woning_status
    to: Juist Thuis
    trigger: state
  - entity_id:
    - schedule.slapen_elmo
    to: 'on'
    from: 'off'
    trigger: state
  conditions:
  - condition: state
    entity_id: schedule.slapen_elmo
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
  - condition: state
    entity_id: switch.hue_smart_plug_6
    state: 'off'
  actions:
  - type: turn_on
    device_id: 2dbd7ce304ab902393dcc8f4596b397a
    entity_id: switch.hue_smart_plug_6
    domain: switch
  - target:
      entity_id: scene.elmo_nacht
    metadata: {}
    action: scene.turn_on
    data: {}
  - type: turn_on
    device_id: 54566db9daccc8f4c4b8c998352d4297
    entity_id: b7dab33b8e51fdb957a9456806835ae7
    domain: switch
  mode: single
  max_exceeded: silent
- id: '1683790519691'
  alias: Harmony Hub - Start Tv Elmo
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: d4bfe137373a4685b374eabfe782bce7
    entity_id: switch.harmony_hub_alexa
    domain: switch
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - service: script.harmony_hub_elmo_trix
    data: {}
  mode: single
- id: '1687676493939'
  alias: HVAC - Airco Boven - Elmo Uit voor Slapen
  description: Zet de Airco van Elmo uit. Avond
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Thuis
  - platform: state
    entity_id:
    - schedule.slapen_elmo
    to: 'on'
    from: 'off'
  - platform: device
    type: turned_on
    device_id: 2dbd7ce304ab902393dcc8f4596b397a
    entity_id: c514c9bed36ede3c3e042d50d1ecd9ee
    domain: switch
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
  - condition: state
    entity_id: input_boolean.cooling_upstairs
    state: 'on'
  - condition: state
    entity_id: climate.airco_elmo
    attribute: hvac_action
    state: cooling
    enabled: true
  - condition: or
    conditions:
    - condition: state
      entity_id: schedule.slapen_elmo
      state: 'on'
    - condition: state
      entity_id: switch.hue_smart_plug_6
      state: 'on'
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 20
      milliseconds: 0
  - device_id: 41354e684da9663012eb92a2d4684ee2
    domain: climate
    entity_id: 81fd6759bd3d89095b48040ae00705f2
    type: set_hvac_mode
    hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1687678022824'
  alias: HVAC - Airco Boven - Trix Uit voor Slapen
  description: Zet de Airco Uit als ze gaan slapen
  trigger:
  - platform: state
    entity_id: input_select.woning_status
    to: Juist Thuis
  - platform: state
    entity_id:
    - schedule.slapen_trix
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
  - condition: state
    entity_id: input_boolean.cooling_upstairs
    state: 'on'
  - condition: state
    entity_id: climate.airco_trix
    attribute: hvac_action
    state: cooling
  - condition: state
    entity_id: schedule.slapen_trix
    state: 'on'
  action:
  - device_id: f0bb97139c00ae23445e7cc8eb4edd42
    domain: climate
    entity_id: climate.airco_trix
    type: set_hvac_mode
    hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1687683454617'
  alias: HVAC - Airco Boven - Trix Uit
  description: Zet de Airco Uit als ze gaan slapen of raam open
  trigger:
  - platform: device
    type: turned_on
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_02_opening
    to: 'on'
  condition:
  - condition: state
    entity_id: climate.airco_trix
    state: cooling
    attribute: hvac_action
  action:
  - device_id: f0bb97139c00ae23445e7cc8eb4edd42
    domain: climate
    entity_id: climate.airco_trix
    type: set_hvac_mode
    hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1687683785709'
  alias: HVAC - Airco Boven - Trix Aan
  description: Zet de Airco Aan als ze uit Bed komt, of we sluiten raam
  trigger:
  - platform: device
    type: turned_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: switch.hue_smart_plug_5
    domain: switch
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_02_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.cooling_upstairs
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: state
    entity_id: climate.airco_trix
    state: 'off'
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_02_opening
    state: 'off'
  - condition: state
    entity_id: switch.hue_smart_plug_5
    state: 'off'
  action:
  - device_id: f0bb97139c00ae23445e7cc8eb4edd42
    domain: climate
    entity_id: climate.airco_trix
    type: set_hvac_mode
    hvac_mode: cool
  - service: climate.set_temperature
    data:
      temperature: 21
    target:
      entity_id: climate.airco_trix
  mode: single
  max_exceeded: silent
- id: '1687689848882'
  alias: Deurbel - Camera Aan Mute
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.hue_smart_plug_5
    to: 'on'
    id: Camera Trix Aan
  - platform: state
    entity_id:
    - switch.hue_smart_plug_6
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.doorbellfront_chime_active
      state: 'on'
    - condition: state
      entity_id: switch.doorbellback_chime_active
      state: 'on'
  - condition: state
    entity_id: group.bewoners_router
    state: home
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.doorbellfront_chime_active
      - switch.doorbellback_chime_active
  mode: single
- id: '1687690052231'
  alias: Deurbel - Camera Uit Unmute
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.hue_smart_plug_5
    to: 'off'
    id: Camera Trix Uit
  - platform: state
    entity_id:
    - switch.hue_smart_plug_6
    to: 'off'
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Slapen
  - platform: state
    entity_id:
    - group.bewoners_router
    to: not_home
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.doorbellfront_chime_active
      state: 'off'
    - condition: state
      entity_id: switch.doorbellback_chime_active
      state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: group.bewoners_router
      state: not_home
    - condition: and
      conditions:
      - condition: state
        entity_id: switch.hue_smart_plug_6
        state: 'off'
      - condition: state
        entity_id: switch.hue_smart_plug_5
        state: 'off'
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.doorbellfront_chime_active
      - switch.doorbellback_chime_active
  mode: single
- id: '1687887471984'
  alias: Personen - Caroline - Aantal uren op Kantoor
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.caroline
    to: Werk (Caro)
    for:
      hours: 9
      minutes: 30
      seconds: 0
    id: 9u
  - platform: state
    entity_id:
    - person.caroline
    to: Werk (Caro)
    for:
      hours: 8
      minutes: 30
      seconds: 0
    id: 8u
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 9u
      sequence:
      - service: notify.mobile_app_iphone_van_caroline
        data:
          message: Je bent al 9 uur op kantoor. (9:30 met middagpauzes)
          title: WELL DONE!
          data:
            group: bewoner
            tag: caro-werk
      - service: notify.mobile_app_iphone_van_bert
        data:
          message: Caroline is al 9 uur op haar werk
          data:
            group: bewoner
            tag: caro-status
          title: CARO 9u OP HAAR WERK
    - conditions:
      - condition: trigger
        id: 8u
      sequence:
      - service: notify.mobile_app_iphone_van_caroline
        data:
          message: Je bent al 8 uur op kantoor. (8:30 met middagpauzes)
          title: GOED GEDAAN!
          data:
            group: bewoner
            tag: caro-werk
      - service: notify.mobile_app_iphone_van_bert
        data:
          message: Caroline heeft haar 8 uur al gewerkt.
          data:
            group: bewoner
            tag: caro-status
          title: CARO 8u OP HAAR WERK
  mode: single
- id: '1688658335380'
  alias: Personen - Caroline - Vertrokken op Werk
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.caroline
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: Vertrokken
    from: Werk (Caro)
  condition:
  - condition: time
    after: '16:00:00'
    before: '18:30:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Vertrokken
      sequence:
      - service: notify.mobile_app_iphone_van_bert
        data:
          message: Caroline is onderweg naar huis
          title: CARO VERTROKKEN OP WERK
          data:
            group: bewoner
            tag: caro-status
  mode: single
- id: '1689491655055'
  alias: HVAC - Airco Boven - Elmo Aan/Uit volgens Boolean
  description: TBD
  trigger:
  - entity_id: input_boolean.cooling_upstairs
    platform: state
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: input_select.woning_status
      state: Op Vakantie
  - condition: state
    entity_id: schedule.slapen_elmo
    state: 'off'
  action:
  - entity_id: script.notify_cooling_upstairs
    action: script.turn_on
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_upstairs
        state: 'on'
      - condition: state
        entity_id: switch.hue_smart_plug_6
        state: 'off'
      - condition: state
        entity_id: climate.airco_elmo
        state: 'off'
      - condition: state
        entity_id: binary_sensor.ewelink_ds01_01_opening
        state: 'off'
      sequence:
      - device_id: 41354e684da9663012eb92a2d4684ee2
        domain: climate
        entity_id: 81fd6759bd3d89095b48040ae00705f2
        type: set_hvac_mode
        hvac_mode: cool
      - data:
          temperature: 21
        target:
          device_id: 41354e684da9663012eb92a2d4684ee2
        action: climate.set_temperature
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_upstairs
        state: 'off'
      - condition: state
        entity_id: climate.airco_elmo
        attribute: hvac_action
        state: cooling
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 20
          milliseconds: 0
      - device_id: 41354e684da9663012eb92a2d4684ee2
        domain: climate
        entity_id: 81fd6759bd3d89095b48040ae00705f2
        type: set_hvac_mode
        hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1689492113424'
  alias: HVAC - Airco Slaapkamer - Aan/Uit volgens Boolean
  description: TBD
  trigger:
  - entity_id:
    - input_boolean.cooling_attic
    platform: state
  - platform: state
    entity_id:
    - input_select.woning_status
    from: Juist Wakker
    for:
      hours: 1
      minutes: 0
      seconds: 0
  - platform: state
    entity_id:
    - input_select.woning_status
    from: Op Vakantie
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: input_select.woning_status
      state: Op Vakantie
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_attic
        state: 'on'
      - condition: state
        entity_id: climate.airco_slaapkamer
        state: 'off'
      - condition: state
        entity_id: climate.ons_huisje
        state: 'off'
      - condition: not
        conditions:
        - condition: state
          entity_id: binary_sensor.ewelink_ds01_03_opening
          state: 'on'
      sequence:
      - device_id: d0cabb78bb48d64825d28087185ebb2f
        domain: climate
        entity_id: 5f30af6a34bd978f852dcf474d125bb6
        type: set_hvac_mode
        hvac_mode: cool
      - service: climate.set_temperature
        data:
          temperature: 21
        target:
          device_id:
          - d0cabb78bb48d64825d28087185ebb2f
      - service: script.turn_on
        data: {}
        target:
          entity_id:
          - script.notify_cooling_attic
    - conditions:
      - condition: state
        entity_id: input_boolean.cooling_attic
        state: 'off'
      - condition: state
        entity_id: climate.airco_slaapkamer
        attribute: hvac_action
        state: cooling
      sequence:
      - device_id: d0cabb78bb48d64825d28087185ebb2f
        domain: climate
        entity_id: 5f30af6a34bd978f852dcf474d125bb6
        type: set_hvac_mode
        hvac_mode: 'off'
      - service: script.turn_on
        data: {}
        target:
          entity_id:
          - script.notify_cooling_attic
  mode: single
  max_exceeded: silent
- id: '1689492239243'
  alias: HVAC - Airco Slaapkamer - Koelen Aan/Uit volgens Buiten Temperatuur
  description: TBD
  triggers:
  - entity_id: sensor.hue_sensor_buiten_temperature
    above: sensor.airco_slaapkamer_temperature
    id: Zolder Warm
    for:
      hours: 0
      minutes: 5
      seconds: 0
    trigger: numeric_state
  - entity_id: sensor.hue_sensor_buiten_temperature
    below: sensor.airco_slaapkamer_temperature
    id: Zolder Kouder
    for:
      hours: 0
      minutes: 5
      seconds: 0
    trigger: numeric_state
  - entity_id: sensor.hue_sensor_buiten_temperature
    above: 23.5
    id: Buiten Warm
    for:
      hours: 0
      minutes: 5
      seconds: 0
    trigger: numeric_state
  - entity_id: sensor.hue_sensor_buiten_temperature
    for:
      hours: 0
      minutes: 5
      seconds: 0
    below: 23
    id: Buiten Kouder
    trigger: numeric_state
  - entity_id: climate.slaapkamer
    for:
      hours: 0
      minutes: 5
      seconds: 0
    above: 24
    id: Kamer Warm
    attribute: current_temperature
    trigger: numeric_state
  - entity_id: climate.slaapkamer
    for:
      hours: 0
      minutes: 5
      seconds: 0
    below: 20
    id: Kamer Kouder
    attribute: current_temperature
    trigger: numeric_state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.season
      state: summer
      enabled: true
    - condition: state
      entity_id: input_boolean.heating
      state: 'off'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Buiten Warm
        - Zolder Warm
        - Kamer Warm
      - condition: or
        conditions:
        - condition: numeric_state
          entity_id: sensor.hue_sensor_buiten_temperature
          above: 23.5
        - condition: numeric_state
          entity_id: climate.slaapkamer
          above: 24
          attribute: current_temperature
      - condition: not
        conditions:
        - condition: state
          entity_id: binary_sensor.ewelink_ds01_03_opening
          state: 'on'
      sequence:
      - condition: state
        entity_id: input_boolean.cooling_attic
        state: 'off'
      - condition: state
        entity_id: climate.ons_huisje
        state: 'off'
      - data: {}
        target:
          entity_id:
          - input_boolean.cooling_attic
        action: input_boolean.turn_on
      alias: Aan als het te warm is
    - conditions:
      - condition: trigger
        id:
        - Kamer Kouder
      sequence:
      - condition: numeric_state
        entity_id: sensor.hue_sensor_buiten_temperature
        below: 23
      - condition: state
        entity_id: input_boolean.cooling_attic
        state: 'on'
      - data: {}
        target:
          entity_id:
          - input_boolean.cooling_attic
        action: input_boolean.turn_off
      alias: Uit als kamer koel genoeg is
    default:
    - condition: state
      entity_id: input_boolean.cooling_attic
      state: 'on'
    - data: {}
      target:
        entity_id:
        - input_boolean.cooling_attic
      action: input_boolean.turn_off
  mode: single
  max_exceeded: silent
- id: '1689595995781'
  alias: HVAC - Airco Slaapkamer - Uit voor Slapen
  description: Zet de Airco uit. Avond
  trigger:
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Slapen
  condition:
  - condition: state
    entity_id: input_boolean.cooling_attic
    state: 'on'
  - condition: state
    entity_id: climate.airco_slaapkamer
    attribute: hvac_action
    state: cooling
    enabled: true
  action:
  - device_id: d0cabb78bb48d64825d28087185ebb2f
    domain: climate
    entity_id: 5f30af6a34bd978f852dcf474d125bb6
    type: set_hvac_mode
    hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1695726677784'
  alias: HVAC - Airco Boven - Elmo Aan
  description: Zet de Airco Aan als hij uit Bed komt, of we sluiten raam
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_01_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.cooling_upstairs
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
    alias: Test Status Woning
  - condition: state
    entity_id: climate.airco_elmo
    state: 'off'
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_01_opening
    state: 'off'
  - condition: state
    entity_id: switch.hue_smart_plug_6
    state: 'off'
  action:
  - device_id: 41354e684da9663012eb92a2d4684ee2
    domain: climate
    entity_id: 81fd6759bd3d89095b48040ae00705f2
    type: set_hvac_mode
    hvac_mode: cool
  - service: climate.set_temperature
    data:
      temperature: 21
    target:
      entity_id:
      - climate.airco_elmo
  mode: single
  max_exceeded: silent
- id: '1695726976025'
  alias: HVAC - Airco Boven - Elmo Uit
  description: Zet de Airco Uit als ze gaan slapen of raam open
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_01_opening
    to: 'on'
  condition:
  - condition: state
    entity_id: climate.airco_elmo
    state: cooling
    attribute: hvac_action
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 20
      milliseconds: 0
  - device_id: 41354e684da9663012eb92a2d4684ee2
    domain: climate
    entity_id: 81fd6759bd3d89095b48040ae00705f2
    type: set_hvac_mode
    hvac_mode: 'off'
  mode: single
  max_exceeded: silent
- id: '1695731298028'
  alias: HVAC - Verwarming Boven - Trix Uit
  description: Zet de verwarming Uit als raam open
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_02_opening
    to: 'on'
  - platform: state
    entity_id:
    - climate.trix
    to: heat
  condition:
  - condition: state
    entity_id: climate.ons_huisje
    state: heat
  - condition: state
    entity_id: climate.trix
    state: heat
  - condition: state
    state: 'on'
    entity_id: binary_sensor.ewelink_ds01_02_opening
  action:
  - service: script.turn_on
    data: {}
    target:
      entity_id: script.notify_heating_upstairs
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_02_opening
    state: 'on'
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.trix
  mode: single
  max_exceeded: silent
- id: '1695731606805'
  alias: HVAC - Verwarming Boven - Trix Aan
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_02_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: climate.ons_huisje
    state: heat
  - condition: state
    entity_id: climate.trix
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.ewelink_ds01_02_opening
      state: 'off'
    - condition: state
      entity_id: binary_sensor.ewelink_ds01_02_opening
      state: unavailable
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: heat
    target:
      entity_id: climate.trix
  mode: single
- id: '1695731770797'
  alias: HVAC - Verwarming Boven - Elmo Aan
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_01_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: climate.ons_huisje
    state: heat
  - condition: state
    entity_id: climate.elmo
    state: 'off'
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_01_opening
    state: 'off'
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: heat
    target:
      entity_id:
      - climate.elmo
  mode: single
- id: '1695731846147'
  alias: HVAC - Verwarming Boven - Elmo Uit
  description: Zet de verwarming Uit als raam open
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_01_opening
    to: 'on'
  - platform: state
    entity_id:
    - climate.elmo
    to: heat
  condition:
  - condition: state
    entity_id: climate.ons_huisje
    state: heat
  - condition: state
    entity_id: climate.elmo
    state: heat
  - condition: state
    state: 'on'
    entity_id: binary_sensor.ewelink_ds01_01_opening
  action:
  - service: script.turn_on
    data: {}
    target:
      entity_id: script.notify_heating_upstairs
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_01_opening
    state: 'on'
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id:
      - climate.elmo
  mode: single
  max_exceeded: silent
- id: '1695972543527'
  alias: Personen - Bert - Vertrokken op Werk
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.bert
    for:
      hours: 0
      minutes: 10
      seconds: 0
    id: Vertrokken
    from: Werk (Bert)
  condition:
  - condition: time
    after: '15:20:00'
    before: '18:30:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Vertrokken
      sequence:
      - service: notify.mobile_app_iphone_van_caroline
        data:
          message: Bert is vertrokken op het werk
          title: BERT VERTROKKEN OP WERK
          data:
            group: bewoner
            tag: bert-status
  mode: single
- id: '1695974768068'
  alias: HVAC - Verwarming Slaapkamer - Aan
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.heating_attic
    to: 'on'
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Thuis
    for:
      hours: 0
      minutes: 30
      seconds: 0
    from: Juist Wakker
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Juist Thuis
  - platform: state
    entity_id:
    - input_boolean.pre_heat
    to: 'on'
  - platform: state
    entity_id:
    - input_boolean.heating
    to: 'on'
  - platform: numeric_state
    entity_id:
    - climate.slaapkamer
    attribute: current_temperature
    below: 15.5
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_03_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.heating
    state: 'on'
  - condition: state
    entity_id: input_boolean.cooling_attic
    state: 'off'
  - alias: Test of we wel thuis zijn OF heel koud is
    condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
      for:
        hours: 0
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
      for:
        hours: 0
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
      for:
        hours: 0
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
      for:
        hours: 0
        minutes: 0
        seconds: 0
    - alias: Bevestig dat Woning Status gelijk is aan Juist Weg EN dat het koud is
      condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: numeric_state
        entity_id: climate.slaapkamer
        below: 15.6
    - alias: Bevestig dat Woning Status gelijk is aan Weg EN dat het koud is
      condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Weg
      - condition: numeric_state
        entity_id: climate.slaapkamer
        below: 15.6
    - alias: Bevestig dat Woning Status gelijk is aan Vakantie EN dat het koud is
      condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Op Vakantie
      - condition: numeric_state
        entity_id: climate.slaapkamer
        below: 15.6
  - alias: Test of we NIET slapen
    condition: not
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Slapen
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Wakker
    enabled: true
  - alias: Test of verwarming schema slaapkamer aan is OF dat het te koud is
    condition: or
    conditions:
    - condition: state
      entity_id: schedule.heating_attic
      state: 'on'
    - condition: numeric_state
      entity_id: climate.airco_slaapkamer
      attribute: current_temperature
      below: 15.6
  - condition: not
    conditions:
    - condition: state
      entity_id: binary_sensor.ewelink_ds01_03_opening
      state: 'on'
    alias: Test raam niet open
  action:
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.airco_slaapkamer
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: climate.set_hvac_mode
    data:
      hvac_mode: heat
    target:
      entity_id: climate.airco_slaapkamer
  - service: climate.set_temperature
    data:
      temperature: 19
    target:
      entity_id: climate.airco_slaapkamer
  mode: single
- id: '1695975090500'
  alias: HVAC - Verwarming Slaapkamer - Uit
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.heating_attic
    to: 'off'
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Juist Weg
  - platform: state
    entity_id:
    - input_boolean.heating
    to: 'off'
  - platform: state
    entity_id:
    - input_boolean.cooling_attic
    to: 'on'
  - platform: state
    entity_id:
    - input_select.woning_status
    to: Slapen
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_03_opening
    to: 'on'
  condition:
  - condition: state
    entity_id: climate.airco_slaapkamer
    state: heat
  - condition: not
    conditions:
    - condition: and
      conditions:
      - condition: state
        entity_id: input_select.woning_status
        state: Juist Weg
      - condition: numeric_state
        entity_id: climate.slaapkamer
        below: 17.9
    alias: Test dat NIET Juist Weg & te koud
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.airco_slaapkamer
  mode: single
- id: '1700140550030'
  alias: HVAC - Verwarming Slaapkamer - Uit Warm Genoeg
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - climate.airco_slaapkamer
    for:
      hours: 0
      minutes: 2
      seconds: 0
    attribute: current_temperature
    above: 19
  condition:
  - condition: state
    entity_id: climate.airco_slaapkamer
    state: heat
  - condition: state
    entity_id: schedule.heating_attic
    state: 'off'
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.airco_slaapkamer
  mode: single
- id: '1701788959972'
  alias: HVAC - Verwarming Slaapkamer - Uit voldoende warm
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - climate.airco_slaapkamer
    for:
      hours: 0
      minutes: 1
      seconds: 0
    attribute: current_temperature
    above: 18
  condition:
  - condition: state
    entity_id: climate.airco_slaapkamer
    state: heat
  - condition: state
    entity_id: schedule.heating_attic
    state: 'off'
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.airco_slaapkamer
  mode: single
- id: '1713336200399'
  alias: Computer - Aan
  description: Zet Computer aan wanneer op Bureau of Tv Aan
  trigger:
  - platform: state
    entity_id:
    - input_select.harmony_hub
    from: PowerOff
  - platform: state
    entity_id:
    - binary_sensor.hue_motion_sensor_4_motion
    to: 'on'
  condition:
  - condition: state
    entity_id: switch.wake_on_lan
    state: 'off'
  action:
  - service: script.computer_on
    metadata: {}
    data: {}
  mode: single
- id: '1713760825027'
  alias: Harmony - einde tv avond
  description: TBD
  triggers:
  - at: '22:20:00'
    trigger: time
  conditions:
  - condition: state
    entity_id: input_boolean.visitor
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - sat
    - sun
  - condition: device
    type: is_on
    device_id: d4bfe137373a4685b374eabfe782bce7
    entity_id: bd4cea790e6faae31f4a08ae6ba449e4
    domain: remote
  actions:
  - metadata: {}
    data: {}
    target:
      entity_id: script.notificatie_einde_tv_avond
    action: script.turn_on
  - delay:
      hours: 0
      minutes: 9
      seconds: 30
      milliseconds: 0
  - metadata: {}
    data: {}
    target:
      entity_id: script.notificatie_einde_tv_avond_spreek_2
    action: script.turn_on
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - condition: device
    type: is_on
    device_id: d4bfe137373a4685b374eabfe782bce7
    entity_id: bd4cea790e6faae31f4a08ae6ba449e4
    domain: remote
  - data: {}
    target:
      entity_id:
      - script.harmony_hub_powered_off
    action: script.turn_on
    enabled: false
  mode: single
  max_exceeded: silent
- id: '1725361076339'
  alias: HVAC - Airco Slaapkamer - Aan
  description: Zet de Airco Aan als we sluiten raam
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ewelink_ds01_03_opening
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.cooling_attic
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Juist Thuis
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Werk
    - condition: state
      entity_id: input_select.woning_status
      state: Thuis Verlof
  - condition: state
    entity_id: climate.airco_slaapkamer
    state: 'off'
  - condition: state
    entity_id: binary_sensor.ewelink_ds01_03_opening
    state: 'off'
  action:
  - device_id: d0cabb78bb48d64825d28087185ebb2f
    domain: climate
    entity_id: 5f30af6a34bd978f852dcf474d125bb6
    type: set_hvac_mode
    hvac_mode: cool
  - data:
      temperature: 21
    action: climate.set_temperature
    target:
      entity_id: climate.airco_slaapkamer
  mode: single
  max_exceeded: silent
- id: '1727767498882'
  alias: Kindjes Alarm
  description: TBD
  trigger:
  - platform: state
    entity_id:
    - input_button.kindjes_alarm
  condition: []
  action:
  - data: {}
    action: script.turn_on
    target:
      entity_id: script.notify_light_elmo
  - condition: or
    conditions:
    - condition: state
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_1
      state: 'off'
    - condition: state
      entity_id: light.hue_white_and_color_ambiance_a19_gen2_2
      state: 'off'
  - data:
      transition: 120
    target:
      entity_id:
      - scene.elmo_ochtend
      - scene.trix_ochtend
    action: scene.turn_on
  - delay:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 2dbd7ce304ab902393dcc8f4596b397a
    entity_id: switch.hue_smart_plug_6
    domain: switch
  - type: turn_off
    device_id: 49f53c6bd982ffff9c69e47fa9c12fc0
    entity_id: 9141d8d800b6ab6ebd9b8e296244a579
    domain: switch
  mode: single
  max_exceeded: silent
- id: '1746536804143'
  alias: Herinneringen - Kinderen - School Vertrekken
  description: ''
  triggers:
  - trigger: time
    at: 08:00:00
  conditions:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  actions:
  - action: script.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: script.notificatie_school_vertrekken_elmo_trix
  mode: single
- id: '1746601817340'
  alias: Herinneringen - Kinderen - School Ophalen
  description: ''
  triggers:
  - trigger: time
    at: '15:00:00'
    id: Volledige Schooldag
  - trigger: time
    at: '11:40:00'
    id: Halve Schooldag
  conditions:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: trigger
        id:
        - Volledige Schooldag
      - condition: time
        weekday:
        - mon
        - tue
        - thu
        - fri
    - condition: and
      conditions:
      - condition: trigger
        id:
        - Halve Schooldag
      - condition: time
        weekday:
        - wed
  actions:
  - action: script.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: script.notificatie_school_ophalen_elmo_trix
  mode: single
