
alias: Notify iOS Bert - Dennis - Status
sequence:
  - condition: template
    value_template: "{{ states('input_boolean.notify_bert') in ['on'] and states('person.bert') not in ['home'] }}"
  - service: notify.mobile_app_iphone_van_bert
    data_template:
      title: "DUSTY"
      message: >
        {% if state_attr('vacuum.dennis', 'status') == 'Stuck' %}
          'Dennis zit vast. Die Domme Dennis toch.'
        {% elif state_attr('vacuum.dennis', 'bin_full') == true %}
          'Dennis heeft te veel gegeten. Maak zijn buikje leeg a.u.b.'
        {% elif states('vacuum.dennis') in ['docked'] and states('input_boolean.vacuum_cleaned_today') in ['on'] %}
          'Dennis is klaar met zijn taak.'
        {% elif states('vacuum.dennis') in ['docked'] and states('input_boolean.vacuum_cleaned_today') in ['off'] %}
          'Dennis is nog niet klaar met zijn taak voor vandaag.'
        {% elif states('vacuum.dennis') in ['cleaning'] %}
          'Dennis begint het huis te kuisen. Beep Beep'
        {% else %}
          'Dennis is still going strong'
        {% endif %}
      data:
        push:
          thread-id: "huis"
