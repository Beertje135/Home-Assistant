
alias: Notify Alexa - Woning - Als status aangepast
sequence:
  - condition: template
    value_template: "{{ states('input_select.woning_status') not in ['Slapen'] }}"
  - condition: template
    value_template: "{{ (states('input_select.woning_status') in ['Thuis (Werk)'] and (states('sensor.time')) <= '08:00') or states('input_select.woning_status') in ['Juist Thuis'] or states('input_select.woning_status') in ['Thuis (Verlof)'] }}"
  - wait_template: "{{ is_state('group.bewoners_router', 'home') }}"
    timeout: '00:05:00'
    continue_on_timeout: false
  - delay: '00:00:10'
  - service: notify.alexa_media
    data_template:
      target:
        - media_player.kitchen_alexa_2
        - media_player.bathroom_alexa
      message: >
        {% if states('input_select.woning_status') in ['Thuis (Werk)'] and (states('sensor.time')) <= "09:00" %}
          'It's nice you are staying home today.'
        {% elif states('input_select.woning_status') in ['Thuis (Verlof)'] %}
          'Enjoy your holiday.'
        {% elif states('person.bert') not in ['home'] %}
          'Hello Caroline. Welcome Back Home'
        {% elif states('person.caroline') not in ['home'] %}
          'Hello Master Bert. Welcome Back Home, the stupid cat was waiting for you'
        {% else %}
          'Welcome Home'
        {% endif %}
      data:
        type: announce
        method: speak
