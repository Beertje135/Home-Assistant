
alias: Notify iOS Caro - Woning - Als status aangepast
sequence:
  - condition: template
    value_template: "{{ states('input_boolean.notify_caro') in ['on'] }}"
  - condition: template
    value_template: "{{ (states('person.caroline') not in ['home'] and states('input_select.woning_status') in ['Vakantie']) or (states('person.caroline') in ['home'] and states('input_select.woning_status') in ['Dag Thuis'] and (states.sensor.time.state) <= '16:00') }}"
  - service: notify.mobile_app_iphone_van_caro
    data_template:
      title: "STATUS WONING"
      message: >
        {% if states('person.caroline') not in ['home'] and states('input_select.woning_status') in ['Vakantie'] %}
          Het lijkt alsof jullie op vakantie zijn. Fijne vakantie geniet er van en binnenkort.
        {% elif states('input_boolean.heating') in ['off'] %}
          Het lijkt alsof je nog thuis bent vandaag.
        {% else %}
          Het lijkt alsof je nog thuis bent vandaag. Ik zal de verwarming aan laten.
        {% endif %}
      data:
        push:
          thread-id: "huis"
