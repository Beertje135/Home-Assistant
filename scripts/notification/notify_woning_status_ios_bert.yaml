
alias: Notify iOS Bert - Woning - Als status aangepast
sequence:
  - condition: template
    value_template: "{{ states('input_boolean.notify_bert') in ['on'] }}"
  - condition: template
    value_template: "{{ (states('person.bert') not in ['home'] and states('input_select.woning_status') in ['Op Vakantie']) or (states('person.bert') in ['home'] and states('input_select.woning_status') in ['Thuis (Werk)'] and (states('sensor.time')) <= '16:00') }}"
  - service: notify.mobile_app_iphone_van_bert
    data_template:
      title: "STATUS WONING"
      message: >
        {% if states('person.bert') not in ['home'] and states('input_select.woning_status') in ['Op Vakantie'] %}
          Het lijkt alsof jullie op vakantie zijn. Fijne vakantie geniet er van en binnenkort.
        {% elif states('input_boolean.heating') in ['off'] %}
          Het lijkt alsof je nog thuis bent vandaag.
        {% else %}
          Het lijkt alsof je nog thuis bent vandaag. Ik zal de verwarming aan laten.
        {% endif %}
      data:
        push:
          thread-id: "huis"
