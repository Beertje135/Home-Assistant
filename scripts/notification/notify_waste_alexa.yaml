
alias: Notify Alexa - Vuilbak - Als buiten moeten
sequence:
  - condition: template
    value_template: "{{ states('group.bewoners_router') in ['home'] or states('group.bezoekers') in ['home']}}"
  - condition: template
    value_template: "{{ states('input_select.woning_status') not in ['Slapen'] }}"
  - wait_template: "{{ is_state('group.bewoners_router', 'home') }}"
    timeout: '00:05:00'
    continue_on_timeout: false
  - delay: 00:00:10
  - service: notify.alexa_media
    data_template:
      target:
        - media_player.alexa_kitchen_2
        - media_player.alexa_bathroom
        - media_player.alexa_livingroom_2
      message: >
        {% if ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: paper, the blue bag, glass and waste, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: the blue bag and waste, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: paper and the blue bag, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: paper and waste, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: paper and glass, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: the blue bag and glas, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_glas')) %}
          Please take out the following trash: glass and waste, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the blue bag, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the paper, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_glas')) %}
          Please take out the glass, pickup is tomorrow morning.
        {% elif ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_papier')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_pmd')) and ((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) != states('sensor.ophaalkalender_glas')) %}
          Please take out the waste, pickup is tomorrow morning.
        {% endif %}
      data:
        type: announce
        method: speak

#"{{ as_timestamp(states('sensor.ophaalkalender_restafval')) != as_timestamp(states('sensor.date')) }}"

# {{((as_timestamp(now())+ (86400)) | timestamp_custom("%Y-%m-%d",true) == states('sensor.ophaalkalender_restafval')) }}
