# AUTOMATION AMPLIFIER LIVING ROOM

- alias: Amplifier Woonkamer - Uit - Apple TV Not Playing
  trigger:
    - platform: state
      entity_id: media_player.apple_tv_living_room
      to: 'idle'
      for:
        minutes: 30
    - platform: state
      entity_id: media_player.apple_tv_living_room
      to: 'paused'
      for:
        minutes: 30
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.harmony_hub
      state: 'Watch Plex'
    - condition: or
      conditions:
      - condition: state
        entity_id: media_player.apple_tv_living_room
        state: 'idle'
      - condition: state
        entity_id: media_player.apple_tv_living_room
        state: 'paused'
  action:
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Powered Off"

- alias: Amplifier Woonkamer - Uit - Chromecast Not Playing
  trigger:
    - platform: state
      entity_id: media_player.chromecast_living_room
      to: 'idle'
      for:
        minutes: 10
    - platform: state
      entity_id: media_player.chromecast_living_room
      to: 'paused'
      for:
        minutes: 10
    - platform: state
      entity_id: media_player.chromecast_living_room
      to: 'off'
      for:
        minutes: 10
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.harmony_hub
      state: 'Watch Chromecast'
    - condition: or
      conditions:
      - condition: state
        entity_id: media_player.chromecast_living_room
        state: 'idle'
      - condition: state
        entity_id: media_player.chromecast_living_room
        state: 'paused'
      - condition: state
        entity_id: media_player.chromecast_living_room
        state: 'off'
  action:
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Powered Off"

- alias: Amplifier Woonkamer - Uit - Echo Not Playing
  trigger:
    - platform: state
      entity_id: media_player.alexa_livingroom
      to: paused
      for:
        minutes: 5
    - platform: state
      entity_id: media_player.everywhere
      to: paused
      for:
        minutes: 5
    - platform: state
      entity_id: media_player.downstairs
      to: paused
      for:
        minutes: 5
    - platform: state
      entity_id: media_player.alexa_livingroom
      to: standby
      for:
        minutes: 5
    - platform: state
      entity_id: media_player.everywhere
      to: standby
      for:
        minutes: 5
    - platform: state
      entity_id: media_player.downstairs
      to: standby
      for:
        minutes: 5
  condition:
    condition: or
    conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'paused'
        - condition: state
          entity_id: media_player.downstairs
          state: 'paused'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'paused'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'standby'
        - condition: state
          entity_id: media_player.downstairs
          state: 'standby'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'standby'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'paused'
        - condition: state
          entity_id: media_player.downstairs
          state: 'paused'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'standby'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'paused'
        - condition: state
          entity_id: media_player.downstairs
          state: 'standby'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'paused'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'standby'
        - condition: state
          entity_id: media_player.downstairs
          state: 'paused'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'paused'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'paused'
        - condition: state
          entity_id: media_player.downstairs
          state: 'standby'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'standby'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'standby'
        - condition: state
          entity_id: media_player.downstairs
          state: 'paused'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'standby'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_select.harmony_hub
          state: 'Alexa'
        - condition: state
          entity_id: media_player.everywhere
          state: 'standby'
        - condition: state
          entity_id: media_player.downstairs
          state: 'standby'
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: 'paused'
  action:
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Powered Off"

- alias: Amplifier Woonkamer - Aan - Chromecast Playing
  trigger:
    - platform: state
      entity_id: media_player.chromecast_living_room
      to: 'playing'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.harmony_hub
      state: 'Powered Off'
  action:
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Watch Chromecast"

- alias: Amplifier Woonkamer - Aan - Echo Playing
  trigger:
    - platform: state
      entity_id: media_player.alexa_livingroom
      to: playing
    - platform: state
      entity_id: media_player.everywhere
      to: playing
    - platform: state
      entity_id: media_player.downstairs
      to: playing
  condition:
    - condition: state
      entity_id: input_select.harmony_hub
      state: 'Powered Off'
  action:
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Alexa"

- alias: Amplifier Woonkamer - Aan - Echo Playing (Harmony Powered Off)
  trigger:
    - platform: state
      entity_id: input_select.harmony_hub
      to: 'Powered Off'
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.woning_status
          state: 'Thuis'
        - condition: state
          entity_id: input_select.woning_status
          state: 'Juist Thuis'
        - condition: state
          entity_id: input_select.woning_status
          state: 'Dag Thuis'
        - condition: state
          entity_id: input_select.woning_status
          state: 'Juist Wakker'
      - condition: or
        conditions:
        - condition: state
          entity_id: media_player.everywhere
          state: playing
        - condition: state
          entity_id: media_player.alexa_livingroom
          state: playing
        - condition: state
          entity_id: media_player.downstairs
          state: playing
  action:
    - delay: 00:00:05
    - service: input_select.select_option
      entity_id: input_select.harmony_hub
      data:
        option: "Alexa"

# AUTOMATION AMPLIFIER KITCHEN

- alias: Amplifier Keuken - Aan - Echo Playing
  trigger:
    - platform: state
      entity_id: media_player.alexa_kitchen_1
      to: playing
    - platform: state
      entity_id: media_player.everywhere
      to: playing
    - platform: state
      entity_id: media_player.downstairs
      to: playing
  condition:
    - condition: state
      entity_id: light.hue_keuken_smart_plug
      state: 'off'
  action:
    - service: script.turn_on
      entity_id:
        - script.switch_kitchen_speakers_on
